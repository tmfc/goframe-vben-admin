Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInternalData=createInternalData,exports.default=void 0;var _vue=require("vue"),_comp=require("../../../ui/src/comp"),_ui=require("../../../ui"),_utils=require("../../../ui/src/utils"),_dom=require("../../../ui/src/dom"),_log=require("../../../ui/src/log"),_xeUtils=_interopRequireDefault(require("xe-utils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let{getI18n,getIcon,renderEmptyElement}=_ui.VxeUI;function createInternalData(){return{}}var _default=exports.default=(0,_comp.defineVxeComponent)({name:"TableCustomPanel",props:{customStore:{type:Object,default:()=>({})}},setup(R,t){var e=_xeUtils.default.uniqueId();let H=_ui.VxeUI.getComponent("VxeModal"),G=_ui.VxeUI.getComponent("VxeDrawer"),z=_ui.VxeUI.getComponent("VxeButton"),N=_ui.VxeUI.getComponent("VxeNumberInput"),P=_ui.VxeUI.getComponent("VxeRadioGroup"),$=(0,_vue.inject)("$xeTable",{}),{props:W,reactData:K,internalData:i}=$,{computeCustomOpts:X,computeColumnDragOpts:q,computeColumnOpts:de,computeIsMaxFixedColumn:j,computeResizableOpts:ce}=$.getComputeMaps(),k=(0,_vue.ref)(),Y=(0,_vue.ref)(),Z=(0,_vue.ref)(),u=(0,_vue.ref)(),d=(0,_vue.ref)(),E=(0,_vue.reactive)({dragCol:null,dragGroupField:null,dragAggFnCol:null,dragTipText:""}),f=createInternalData(),a={refElem:k,refBodyWrapperElem:Y,refCustomBodyElem:Z,refDragLineElem:u,refDragTipElem:d},s={},B=e=>{var t=R.customStore;t.activeWrapper=!0,$.customOpenEvent(e)},w=e=>{let t=R.customStore;t.activeWrapper=!1,setTimeout(()=>{t.activeBtn||t.activeWrapper||$.customCloseEvent(e)},300)},J=({$event:e})=>{K.isCustomStatus=!0,$.saveCustom(),$.closeCustom(),$.emitCustomEvent("confirm",e),$.emitCustomEvent("close",e)},Q=({$event:e})=>{$.closeCustom(),$.emitCustomEvent("close",e)},ee=({$event:e})=>{$.cancelCustom(),$.closeCustom(),$.emitCustomEvent("cancel",e),$.emitCustomEvent("close",e)},l=e=>{$.resetCustom(!0),$.closeCustom(),$.emitCustomEvent("reset",e),$.emitCustomEvent("close",e)},te=({$event:t})=>{_ui.VxeUI.modal?_ui.VxeUI.modal.confirm({content:getI18n("vxe.custom.cstmConfirmRestore"),className:"vxe-table--ignore-clear",escClosable:!0}).then(e=>{"confirm"===e&&l(t)}):l(t)},o=t=>{var e=K.customColumnList,e=_xeUtils.default.findTree(e,e=>e===t);e&&e.parent&&(e=e.parent,e.children)&&e.children.length&&(e.renderVisible=e.children.every(e=>e.renderVisible),e.halfVisible=!e.renderVisible&&e.children.some(e=>e.renderVisible||e.halfVisible),o(e))},le=(e,t)=>{let l=!e.renderVisible;X.value.immediate?(_xeUtils.default.eachTree([e],e=>{e.visible=l,e.renderVisible=l,e.halfVisible=!1}),K.isCustomStatus=!0,$.handleCustom(),$.saveCustomStore("update:visible")):_xeUtils.default.eachTree([e],e=>{e.renderVisible=l,e.halfVisible=!1}),o(e),$.checkCustomStatus(),$.dispatchEvent("custom-visible-change",{column:e,checked:l},t)},me=e=>{X.value.immediate&&e.renderResizeWidth!==e.renderWidth&&(e.resizeWidth=e.renderResizeWidth,e.renderWidth=e.renderResizeWidth,K.isCustomStatus=!0,$.handleCustom(),$.saveCustomStore("update:width"))},oe=(e,t,l)=>{var o=j.value;let a=null;X.value.immediate?(e.renderFixed===t?(a="",_xeUtils.default.eachTree([e],e=>{e.fixed="",e.renderFixed=""})):o&&!e.renderFixed||(a=t,_xeUtils.default.eachTree([e],e=>{e.fixed=t,e.renderFixed=t})),K.isCustomStatus=!0,$.handleCustom(),$.saveCustomStore("update:fixed")):e.renderFixed===t?(a="",_xeUtils.default.eachTree([e],e=>{e.renderFixed=""})):o&&!e.renderFixed||(a=t,_xeUtils.default.eachTree([e],e=>{e.renderFixed=t})),null!==a&&$.dispatchEvent("custom-fixed-change",{column:e,fixed:a},l)},ae=e=>{var t=K.customStore,t=!t.isAll;$.toggleCustomAllCheckbox(),$.dispatchEvent("custom-visible-all",{checked:t},e)},c=(e,t,l,o)=>{var a,s,r,i,n=Y.value;n&&(i=Z.value)&&(a=f.prevDragToChild,s=n.getBoundingClientRect(),i=i.getBoundingClientRect(),r=u.value,t?r&&(l?(t=t.getBoundingClientRect(),r.style.display="block",r.style.left=Math.max(0,i.x-s.x)+"px",r.style.top=Math.max(1,t.y+n.scrollTop-s.y)+"px",r.style.height=t.height+"px",r.style.width=t.width+"px",r.setAttribute("drag-pos",o),r.setAttribute("drag-to-child",a?"y":"n")):r.style.display=""):r&&(r.style.display="node"),i=d.value)&&(i.style.display="block",i.style.top=Math.min(n.clientHeight+n.scrollTop-i.clientHeight,e.clientY+n.scrollTop-s.y)+"px",i.style.left=Math.min(n.clientWidth+n.scrollLeft-i.clientWidth,e.clientX+n.scrollLeft-s.x)+"px",i.setAttribute("drag-status",l?a?"sub":"normal":"disabled"))},n=()=>{var e=E.dragCol,t=q.value.tooltipMethod;let l="";l=t?""+(t({$table:$,column:e})||""):getI18n("vxe.custom.cstmDragTarget",[e&&"html"!==e.type?e.getTitle():""]),E.dragTipText=l},r=()=>{var e=d.value,t=u.value;e&&(e.style.display=""),t&&(t.style.display="")},se=e=>{var e=e.currentTarget.parentElement.parentElement.parentElement,t=e.getAttribute("colid"),t=$.getColumnById(t);e.draggable=!0,E.dragCol=t,E.dragGroupField=null,E.dragAggFnCol=null,n(),(0,_dom.addClass)(e,"active--drag-origin")},re=e=>{e=e.currentTarget.parentElement.parentElement.parentElement;r(),e.draggable=!1,E.dragCol=null,E.dragGroupField=null,(E.dragAggFnCol=null,_dom.removeClass)(e,"active--drag-origin")},ie=e=>{e.dataTransfer&&e.dataTransfer.setDragImage((0,_dom.getTpImg)(),0,0),f.prevDragGroupField=null,f.prevDragAggFnColid=null},ne=d=>{let c=W.mouseConfig,m=K.customColumnList,v=i.collectColumn;let p=X.value.immediate;var e=d.currentTarget;let{isCrossDrag:g,isSelfToChildDrag:h,isToChildDrag:x,dragEndMethod:t}=q.value;var l=E.dragCol;let{prevDragCol:o,prevDragGroupField:a,prevDragAggFnColid:s,prevDragPos:b,prevDragToChild:_}=f,C="bottom"===b?1:0;if(a||s)$.handlePivotTableAggregatePanelDragendEvent&&$.handlePivotTableAggregatePanelDragendEvent(d);else if(o&&l&&o!==l){let n=l,u=o;Promise.resolve(!t||t({oldColumn:n,newColumn:u,dragColumn:n,dragPos:b,dragToChild:!!_,offsetIndex:C})).then(a=>{if(a){let e=-1,t=-1,l={},o=(_xeUtils.default.eachTree([n],e=>{l[e.id]=e}),!1);if(p){if(n.parentId&&u.parentId){if(!g)return;if(l[u.id]&&(o=!0,!g||!h))return void(_ui.VxeUI.modal&&_ui.VxeUI.modal.message({status:"error",content:getI18n("vxe.error.treeDragChild")}))}else if(n.parentId){if(!g)return}else if(u.parentId){if(!g)return;if(l[u.id]&&(o=!0,!g||!h))return void(_ui.VxeUI.modal&&_ui.VxeUI.modal.message({status:"error",content:getI18n("vxe.error.treeDragChild")}))}var s,r,i,a=_xeUtils.default.findTree(v,e=>e.id===n.id),a=(o&&g&&h?a&&({items:s,index:i}=a,(r=n.children||[]).forEach(e=>{e.parentId=n.parentId}),s.splice(i,1,...r),n.children=[]):a&&({items:s,index:i,parent:r}=a,s.splice(i,1),r||(e=i)),_xeUtils.default.findTree(v,e=>e.id===u.id));a&&({items:s,index:r,parent:i}=a,g&&x&&_?(n.parentId=u.id,u.children=(u.children||[]).concat([n])):(n.parentId=u.parentId,s.splice(r+C,0,n)),i||(t=r)),_xeUtils.default.eachTree(v,(e,t,l,o,a)=>{a||(e.renderSortNumber=t+1)})}else e=_xeUtils.default.findIndexOf(m,e=>e.id===n.id),m.splice(e,1),t=_xeUtils.default.findIndexOf(m,e=>e.id===u.id),m.splice(t+C,0,n);c&&($.clearSelected&&$.clearSelected(),$.clearCellAreas)&&($.clearCellAreas(),$.clearCopyCellArea());a={oldColumn:n,newColumn:u,dragColumn:n,dragPos:b,offsetIndex:C,_index:{newIndex:t,oldIndex:e}};$.dispatchEvent("custom-sort-change",a,d),$.dispatchEvent("column-dragend",a,d),p&&(K.customColumnList=v.slice(0),$.handleColDragSwapColumn())}}).catch(()=>{})}r(),E.dragCol=null,E.dragGroupField=null,E.dragAggFnCol=null,f.prevDragGroupField=null,f.prevDragAggFnColid=null,e.draggable=!1,e.removeAttribute("drag-pos"),(0,_dom.removeClass)(e,"active--drag-target"),(0,_dom.removeClass)(e,"active--drag-origin")},ue=e=>{var t,l=X.value.immediate,{isCrossDrag:o,isToChildDrag:a}=q.value,s=e.currentTarget,r=(0,_dom.hasControlKey)(e),i=s.getAttribute("colid"),i=$.getColumnById(i),n=E.dragCol;f.prevDragGroupField=null,f.prevDragAggFnColid=null,i&&(o||1===i.level)&&(e.preventDefault(),t=e.clientY-s.getBoundingClientRect().y<s.clientHeight/2?"top":"bottom",!n||n.id===i.id||!o&&1<i.level||!l&&1<i.level?c(e,s,!1,t):(f.prevDragToChild=!!(o&&a&&r&&l),f.prevDragCol=i,f.prevDragPos=t,c(e,s,!0,t)))},ve=()=>{var e=E.dragTipText,t=q.value;return(0,_vue.h)("div",{},[(0,_vue.h)("div",{ref:u,class:["vxe-table-custom-popup--drag-line",{"is--guides":t.showGuidesStatus}]}),(0,_vue.h)("div",{ref:d,class:"vxe-table-custom-popup--drag-tip"},[(0,_vue.h)("div",{class:"vxe-table-custom-popup--drag-tip-wrapper"},[(0,_vue.h)("div",{class:"vxe-table-custom-popup--drag-tip-status"},[(0,_vue.h)("span",{class:["vxe-table-custom-popup--drag-tip-normal-status",getIcon().TABLE_DRAG_STATUS_ROW]}),(0,_vue.h)("span",{class:["vxe-table-custom-popup--drag-tip-sub-status",getIcon().TABLE_DRAG_STATUS_SUB_ROW]}),(0,_vue.h)("span",{class:["vxe-table-custom-popup--drag-tip-group-status",getIcon().TABLE_DRAG_STATUS_AGG_GROUP]}),(0,_vue.h)("span",{class:["vxe-table-custom-popup--drag-tip-values-status",getIcon().TABLE_DRAG_STATUS_AGG_VALUES]}),(0,_vue.h)("span",{class:["vxe-table-custom-popup--drag-tip-disabled-status",getIcon().TABLE_DRAG_DISABLED]})]),(0,_vue.h)("div",{class:"vxe-table-custom-popup--drag-tip-content"},""+(e||""))])])])};(0,_vue.nextTick)(()=>{var e=X.value.mode;H||"modal"!==e||(0,_log.errLog)("vxe.error.reqComp",["vxe-modal"]),G||"drawer"!==e||(0,_log.errLog)("vxe.error.reqComp",["vxe-drawer"]),z||(0,_log.errLog)("vxe.error.reqComp",["vxe-button"]),N||(0,_log.errLog)("vxe.error.reqComp",["vxe-number-input"]),P||(0,_log.errLog)("vxe.error.reqComp",["vxe-radio-group"])});e={xID:e,props:R,context:t,reactData:E,internalData:f,xeTable:$,getRefMaps:()=>a,getComputeMaps:()=>s,renderVN:()=>{var e=X.value;return(["modal","drawer","popup"].includes(""+e.mode)?()=>{var e=$.xeGrid,t=$.xeGantt;let l=R.customStore,{treeConfig:o,rowGroupConfig:a,aggregateConfig:s,resizable:d}=W,{isCustomStatus:r,customColumnList:i}=K,n=X.value,c=n.immediate;var u=q.value;let{mode:m,modalOptions:v,drawerOptions:p,allowVisible:g,allowSort:L,allowFixed:h,allowResizable:x,checkMethod:b,visibleMethod:_}=n,C=de.value,E=C.maxFixedSize,{minWidth:f,maxWidth:T}=ce.value;var I=Object.assign({},v),y=Object.assign({},p);let A=j.value,M=u.isCrossDrag;u=n.slots||{};let D=u.header,S=u.top,k=u.bottom,B=u.default,w=u.footer,O=[],F=l.isAll,U=l.isIndeterminate,V={$table:$,$grid:e,$gantt:t,columns:i,isAllChecked:F,isAllIndeterminate:U,isCustomStatus:r};_xeUtils.default.eachTree(i,(o,a,e,t,s)=>{if(!_||_({$table:$,column:o})){let e=0,t=0;x&&(a={$table:$,column:o,columnIndex:a,$columnIndex:a,$rowIndex:-1},f&&(e=_xeUtils.default.toNumber(_xeUtils.default.isFunction(f)?f(a):f)),T)&&(t=_xeUtils.default.toNumber(_xeUtils.default.isFunction(T)?T(a):T));var a=o.renderVisible,r=o.halfVisible,i=(0,_utils.formatText)(o.getTitle(),1),n=o.children&&o.children.length;let l=!!b&&!b({$table:$,column:o});var u=!a;O.push((0,_vue.h)("tr",{key:o.id,colid:o.id,class:["vxe-table-custom-popup--row level--"+o.level,{"is--group":n}],onDragstart:ie,onDragend:ne,onDragover:ue},[g?(0,_vue.h)("td",{class:"vxe-table-custom-popup--column-item col--visible"},[(0,_vue.h)("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":a,"is--indeterminate":r,"is--disabled":l}],title:getI18n("vxe.custom.setting.colVisible"),onClick:e=>{l||le(o,e)}},[(0,_vue.h)("span",{class:["vxe-checkbox--icon",r?getIcon().TABLE_CHECKBOX_INDETERMINATE:a?getIcon().TABLE_CHECKBOX_CHECKED:getIcon().TABLE_CHECKBOX_UNCHECKED]})])]):renderEmptyElement($),(0,_vue.h)("td",{class:"vxe-table-custom-popup--column-item col--name"},[(0,_vue.h)("div",{class:"vxe-table-custom-popup--name"},[L?M&&c||1===o.level?(0,_vue.h)("div",Object.assign({class:["vxe-table-custom-popup--column-sort-btn",{"is--disabled":l||u}],title:getI18n("vxe.custom.setting.sortHelpTip")},l||u?{}:{onMousedown:se,onMouseup:re}),[(0,_vue.h)("i",{class:getIcon().TABLE_CUSTOM_SORT})]):(0,_vue.h)("div",{class:"vxe-table-custom-popup--column-sort-placeholder"}):renderEmptyElement($),"html"===o.type?(0,_vue.h)("div",{key:"1",class:"vxe-table-custom-popup--title",innerHTML:i}):(0,_vue.h)("div",{key:"0",class:"vxe-table-custom-popup--title",title:i},i)])]),x?(0,_vue.h)("td",{class:"vxe-table-custom-popup--column-item col--resizable"},[o.children&&o.children.length||!(_xeUtils.default.isBoolean(o.resizable)?o.resizable:C.resizable||d)?(0,_vue.h)("span","-"):N?(0,_vue.h)(N,{type:"integer",immediate:!1,disabled:l||u,modelValue:o.renderResizeWidth,min:e||void 0,max:t||void 0,"onUpdate:modelValue"(e){e=Math.max(0,Number(e));o.renderResizeWidth=e},onChange(){me(o)}}):renderEmptyElement($)]):renderEmptyElement($),h?(0,_vue.h)("td",{class:"vxe-table-custom-popup--column-item col--fixed"},[s?(0,_vue.h)("span","-"):P?(0,_vue.h)(P,{modelValue:o.renderFixed||"",type:"button",size:"mini",disabled:l||u,options:[{label:getI18n("vxe.custom.setting.fixedLeft"),value:"left",disabled:l||u||A},{label:getI18n("vxe.custom.setting.fixedUnset"),value:"",disabled:l||u},{label:getI18n("vxe.custom.setting.fixedRight"),value:"right",disabled:l||u||A}],onChange({label:e,$event:t}){oe(o,e,t)}}):renderEmptyElement($)]):renderEmptyElement($)]))}});u={default:()=>(0,_vue.h)("div",{ref:Y,class:"vxe-table-custom-popup--body-wrapper"},B?$.callSlot(B,V):[(0,_vue.h)("div",{ref:Z,class:"vxe-table-custom-popup--handle-wrapper"},[S?(0,_vue.h)("div",{class:"vxe-table-custom-popup--table-top"},$.callSlot(S,V)):renderEmptyElement($),(0,_vue.h)("div",{class:"vxe-table-custom-popup--table-wrapper"},[(0,_vue.h)("table",{},[(0,_vue.h)("colgroup",{},[g?(0,_vue.h)("col",{class:"vxe-table-custom-popup--table-col-seq"}):renderEmptyElement($),(0,_vue.h)("col",{class:"vxe-table-custom-popup--table-col-title"}),x?(0,_vue.h)("col",{class:"vxe-table-custom-popup--table-col-width"}):renderEmptyElement($),h?(0,_vue.h)("col",{class:"vxe-table-custom-popup--table-col-fixed"}):renderEmptyElement($)]),(0,_vue.h)("thead",{},[(0,_vue.h)("tr",{},[g?(0,_vue.h)("th",{},[(0,_vue.h)("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":F,"is--indeterminate":U}],title:getI18n("vxe.table.allTitle"),onClick:ae},[(0,_vue.h)("span",{class:["vxe-checkbox--icon",U?getIcon().TABLE_CHECKBOX_INDETERMINATE:F?getIcon().TABLE_CHECKBOX_CHECKED:getIcon().TABLE_CHECKBOX_UNCHECKED]}),(0,_vue.h)("span",{class:"vxe-checkbox--label"},getI18n("vxe.toolbar.customAll"))])]):renderEmptyElement($),(0,_vue.h)("th",{},getI18n("vxe.custom.setting.colTitle")),x?(0,_vue.h)("th",{},getI18n("vxe.custom.setting.colResizable")):renderEmptyElement($),h?(0,_vue.h)("th",{},getI18n("vxe.custom.setting."+(E?"colFixedMax":"colFixed"),[E])):renderEmptyElement($)])]),(0,_vue.h)(_vue.TransitionGroup,{class:"vxe-table-custom--panel-list",tag:"tbody",name:"vxe-table-custom--list"},{default:()=>O})])]),k?(0,_vue.h)("div",{class:"vxe-table-custom-popup--table-bottom"},$.callSlot(k,V)):renderEmptyElement($),ve()]),!o&&(s||a)&&$.getPivotTableAggregatePopupPanel?(0,_vue.h)($.getPivotTableAggregatePopupPanel(),{customStore:l}):renderEmptyElement($)]),footer:()=>w?$.callSlot(w,V):(0,_vue.h)("div",{class:"vxe-table-custom-popup--footer"},[z?(0,_vue.h)(z,{content:n.resetButtonText||getI18n("vxe.custom.cstmRestore"),disabled:!r,onClick:te}):renderEmptyElement($),c?z?(0,_vue.h)(z,{content:n.closeButtonText||getI18n("vxe.table.customClose"),onClick:Q}):renderEmptyElement($):z?(0,_vue.h)(z,{content:n.cancelButtonText||getI18n("vxe.table.customCancel"),onClick:ee}):renderEmptyElement($),!c&&z?(0,_vue.h)(z,{status:"primary",content:n.confirmButtonText||getI18n("vxe.custom.cstmConfirm"),onClick:J}):renderEmptyElement($)])};return D&&(u.header=()=>$.callSlot(D,V)),"drawer"===m?G?(0,_vue.h)(G,{key:"drawer",className:["vxe-table-custom-drawer-wrapper","vxe-table--ignore-clear",y.className||""].join(" "),modelValue:l.visible,title:y.title||getI18n("vxe.custom.cstmTitle"),width:y.width||Math.min(880,Math.floor(.6*document.documentElement.clientWidth)),position:y.position,resize:!!y.resize,escClosable:!!y.escClosable,maskClosable:!!y.maskClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(e){l.visible=e}},u):renderEmptyElement($):H?(0,_vue.h)(H,{key:"modal",className:["vxe-table-custom-modal-wrapper","vxe-table--ignore-clear",I.className||""].join(" "),modelValue:l.visible,title:I.title||getI18n("vxe.custom.cstmTitle"),width:I.width||Math.min(880,document.documentElement.clientWidth),minWidth:I.minWidth||700,height:I.height||Math.min(680,document.documentElement.clientHeight),minHeight:I.minHeight||400,showZoom:I.showZoom,showMaximize:I.showMaximize,showMinimize:I.showMinimize,mask:I.mask,lockView:I.lockView,resize:I.resize,escClosable:!!I.escClosable,maskClosable:!!I.maskClosable,destroyOnClose:!0,showFooter:!0,"onUpdate:modelValue"(e){l.visible=e}},u):renderEmptyElement($)}:()=>{var e=$.xeGrid,t=$.xeGantt,l=$.props,o=R.customStore,{treeConfig:l,rowGroupConfig:a,aggregateConfig:s}=l,{isCustomStatus:r,customColumnList:i}=K,n=X.value;let d=n.immediate;var u=q.value,c=o.maxHeight;let{checkMethod:m,visibleMethod:v,allowVisible:p,allowSort:g,allowFixed:h,trigger:x,placement:b}=n,_=j.value,C=u.isCrossDrag;var u=n.slots||{},E=u.header,f=u.top,T=u.bottom,I=u.default,u=u.footer;let y=[];var A={},D=o.isAll,S=o.isIndeterminate,e=("hover"===x&&(A.onMouseenter=B,A.onMouseleave=w),{$table:$,$grid:e,$gantt:t,columns:i,isAllChecked:D,isAllIndeterminate:S,isCustomStatus:r});return _xeUtils.default.eachTree(i,(l,e,t,o,a)=>{if(!v||v({$table:$,column:l})){var s=l.renderVisible,r=l.halfVisible,i=l.children&&l.children.length,n=(0,_utils.formatText)(l.getTitle(),1);let t=!!m&&!m({$table:$,column:l});var u=!s;y.push((0,_vue.h)("li",{key:l.id,colid:l.id,class:["vxe-table-custom--option","level--"+l.level,{"is--hidden":t||u,"is--group":i}],onDragstart:ie,onDragend:ne,onDragover:ue},[p?(0,_vue.h)("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":s,"is--indeterminate":r,"is--disabled":t}],title:getI18n("vxe.custom.setting.colVisible"),onClick:e=>{t||le(l,e)}},[(0,_vue.h)("span",{class:["vxe-checkbox--icon",r?getIcon().TABLE_CHECKBOX_INDETERMINATE:s?getIcon().TABLE_CHECKBOX_CHECKED:getIcon().TABLE_CHECKBOX_UNCHECKED]})]):renderEmptyElement($),(0,_vue.h)("div",{class:"vxe-table-custom--name-option"},[g&&(C&&d||1===l.level)?(0,_vue.h)("div",{class:"vxe-table-custom--sort-option"},[(0,_vue.h)("span",Object.assign({class:["vxe-table-custom--sort-btn",{"is--disabled":t||u}],title:getI18n("vxe.custom.setting.sortHelpTip")},t||u?{}:{onMousedown:se,onMouseup:re}),[(0,_vue.h)("i",{class:getIcon().TABLE_CUSTOM_SORT})])]):renderEmptyElement($),"html"===l.type?(0,_vue.h)("div",{key:"1",class:"vxe-table-custom--checkbox-label",innerHTML:n}):(0,_vue.h)("div",{key:"0",class:"vxe-table-custom--checkbox-label"},n)]),!a&&h?(0,_vue.h)("div",{class:"vxe-table-custom--fixed-option"},[z?(0,_vue.h)(z,{mode:"text",icon:"left"===l.renderFixed?getIcon().TOOLBAR_TOOLS_FIXED_LEFT_ACTIVE:getIcon().TOOLBAR_TOOLS_FIXED_LEFT,status:"left"===l.renderFixed?"primary":"",disabled:t||u||_&&!l.renderFixed,title:getI18n("left"===l.renderFixed?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedLeft"),onClick:({$event:e})=>{oe(l,"left",e)}}):renderEmptyElement($),z?(0,_vue.h)(z,{mode:"text",icon:"right"===l.renderFixed?getIcon().TOOLBAR_TOOLS_FIXED_RIGHT_ACTIVE:getIcon().TOOLBAR_TOOLS_FIXED_RIGHT,status:"right"===l.renderFixed?"primary":"",disabled:t||u||_&&!l.renderFixed,title:getI18n("right"===l.renderFixed?"vxe.toolbar.cancelFixed":"vxe.toolbar.fixedRight"),onClick:({$event:e})=>{oe(l,"right",e)}}):renderEmptyElement($)]):renderEmptyElement($)]))}}),(0,_vue.h)("div",{ref:k,key:"simple",class:["vxe-table-custom-wrapper","placement--"+b,{"is--active":o.visible}],style:c&&!["left","right"].includes(b||"")?{maxHeight:c+"px"}:{}},o.visible?[(0,_vue.h)("div",{ref:Y,class:"vxe-table-custom-simple--body-wrapper"},[!l&&(s||a)&&$.getPivotTableAggregateSimplePanel?(0,_vue.h)($.getPivotTableAggregateSimplePanel(),{customStore:o}):renderEmptyElement($),(0,_vue.h)("div",{ref:Z,class:"vxe-table-custom--handle-wrapper"},[(0,_vue.h)("div",{class:"vxe-table-custom--header"},E?$.callSlot(E,e):[(0,_vue.h)("ul",{class:"vxe-table-custom--panel-list"},[(0,_vue.h)("li",{class:"vxe-table-custom--option"},[p?(0,_vue.h)("div",{class:["vxe-table-custom--checkbox-option",{"is--checked":D,"is--indeterminate":S}],title:getI18n("vxe.table.allTitle"),onClick:ae},[(0,_vue.h)("span",{class:["vxe-checkbox--icon",S?getIcon().TABLE_CHECKBOX_INDETERMINATE:D?getIcon().TABLE_CHECKBOX_CHECKED:getIcon().TABLE_CHECKBOX_UNCHECKED]}),(0,_vue.h)("span",{class:"vxe-checkbox--label"},getI18n("vxe.toolbar.customAll"))]):(0,_vue.h)("span",{class:"vxe-checkbox--label"},getI18n("vxe.table.customTitle"))])])]),(0,_vue.h)("div",{class:"vxe-table-custom--body"},[f?(0,_vue.h)("div",{class:"vxe-table-custom--panel-top"},$.callSlot(f,e)):renderEmptyElement($),I?(0,_vue.h)("div",{class:"vxe-table-custom--panel-body"},$.callSlot(I,e)):(0,_vue.h)(_vue.TransitionGroup,Object.assign({class:"vxe-table-custom--panel-list",name:"vxe-table-custom--list",tag:"ul"},A),{default:()=>y}),T?(0,_vue.h)("div",{class:"vxe-table-custom--panel-bottom"},$.callSlot(T,e)):renderEmptyElement($)]),n.showFooter?(0,_vue.h)("div",{class:"vxe-table-custom--footer"},u?$.callSlot(u,e):[(0,_vue.h)("div",{class:"vxe-table-custom--footer-buttons"},[z?(0,_vue.h)(z,{mode:"text",content:n.resetButtonText||getI18n("vxe.table.customRestore"),disabled:!r,onClick:te}):renderEmptyElement($),d?z?(0,_vue.h)(z,{mode:"text",content:n.closeButtonText||getI18n("vxe.table.customClose"),onClick:Q}):renderEmptyElement($):z?(0,_vue.h)(z,{mode:"text",content:n.cancelButtonText||getI18n("vxe.table.customCancel"),onClick:ee}):renderEmptyElement($),!d&&z?(0,_vue.h)(z,{mode:"text",status:"primary",content:n.confirmButtonText||getI18n("vxe.table.customConfirm"),onClick:J}):renderEmptyElement($)])]):null]),ve()])]:[])})()}};return(0,_vue.onUnmounted)(()=>{f=createInternalData()}),(0,_vue.provide)("$xeTableCustomPanel",e),e},render(){return this.renderVN()}});