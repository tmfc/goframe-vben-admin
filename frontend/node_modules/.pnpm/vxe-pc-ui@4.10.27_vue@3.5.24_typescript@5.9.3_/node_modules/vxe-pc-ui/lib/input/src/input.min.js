"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_comp=require("../../ui/src/comp"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_utils=require("../../ui/src/utils"),_dom=require("../../ui/src/dom"),_util=require("../../date-panel/src/util"),_util2=require("../../number-input/src/util"),_vn=require("../../ui/src/vn"),_log=require("../../ui/src/log");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=exports.default=(0,_comp.defineVxeComponent)({name:"VxeInput",props:{modelValue:[String,Number,Date],immediate:{type:Boolean,default:!0},name:String,title:String,type:{type:String,default:"text"},clearable:{type:Boolean,default:()=>(0,_ui.getConfig)().input.clearable},readonly:{type:Boolean,default:null},disabled:{type:Boolean,default:null},placeholder:{type:String,default:null},maxLength:{type:[String,Number],default:()=>(0,_ui.getConfig)().input.maxLength},autoComplete:{type:String,default:"off"},autoFocus:{type:Boolean,default:null},align:String,form:String,className:String,size:{type:String,default:()=>(0,_ui.getConfig)().input.size||(0,_ui.getConfig)().size},multiple:Boolean,showWordCount:Boolean,countMethod:Function,min:{type:[String,Number],default:null},max:{type:[String,Number],default:null},step:[String,Number],trim:{type:Boolean,default:()=>(0,_ui.getConfig)().input.trim},exponential:{type:Boolean,default:()=>(0,_ui.getConfig)().input.exponential},controls:{type:Boolean,default:()=>(0,_ui.getConfig)().input.controls},digits:{type:[String,Number],default:()=>(0,_ui.getConfig)().input.digits},startDate:{type:[String,Number,Date],default:()=>(0,_ui.getConfig)().input.startDate},endDate:{type:[String,Number,Date],default:()=>(0,_ui.getConfig)().input.endDate},minDate:[String,Number,Date],maxDate:[String,Number,Date],startWeek:Number,startDay:{type:[String,Number],default:()=>(0,_ui.getConfig)().input.startDay},labelFormat:String,valueFormat:String,editable:{type:Boolean,default:!0},festivalMethod:{type:Function,default:()=>(0,_ui.getConfig)().input.festivalMethod},disabledMethod:{type:Function,default:()=>(0,_ui.getConfig)().input.disabledMethod},selectDay:{type:[String,Number],default:()=>(0,_ui.getConfig)().input.selectDay},prefixIcon:String,suffixIcon:String,placement:String,transfer:{type:Boolean,default:null},maxlength:[String,Number],autocomplete:String},emits:["update:modelValue","input","change","keydown","keyup","wheel","click","focus","blur","clear","lazy-change","search-click","toggle-visible","prev-number","next-number","prefix-click","suffix-click","date-prev","date-today","date-next"],setup(A,e){const{slots:z,emit:E}=e,S=(0,_vue.inject)("$xeSelect",null),N=(0,_vue.inject)("$xeTreeSelect",null),D=(0,_vue.inject)("$xeModal",null),V=(0,_vue.inject)("$xeDrawer",null),P=(0,_vue.inject)("$xeTable",null),a=(0,_vue.inject)("$xeForm",null),l=(0,_vue.inject)("xeFormItemInfo",null);var t=_xeUtils.default.uniqueId();const $=(0,_ui.useSize)(A)["computeSize"],L=(0,_vue.reactive)({initialized:!1,panelIndex:0,showPwd:!1,visiblePanel:!1,isAniVisible:!1,panelStyle:{},panelPlacement:"",isActivated:!1,inputValue:A.modelValue,datetimePanelValue:null,datePanelValue:null,datePanelLabel:"",datePanelType:"day",selectMonth:null,currentDate:null}),p={yearSize:12,monthSize:20,quarterSize:8,hpTimeout:void 0,dnTimeout:void 0},W=(0,_vue.ref)(),M=(0,_vue.ref)(),j=(0,_vue.ref)(),C=(0,_vue.ref)(),T=(0,_vue.ref)(),k={refElem:W,refInput:M},i={xID:t,props:A,context:e,reactData:L,internalData:p,getRefMaps:()=>k};let s={};const v=(e,t)=>{var a=A["type"];return"time"===a?(0,_util.toStringTimeDate)(e):_xeUtils.default.toStringDate(e,t)},Q=(0,_vue.computed)(()=>{var e=A["transfer"];if(null===e){var t=(0,_ui.getConfig)().input.transfer;if(_xeUtils.default.isBoolean(t))return t;if(P||D||V||a)return!0}return e}),Z=(0,_vue.computed)(()=>!!a&&a.props.readonly),u=(0,_vue.computed)(()=>{var e=A["readonly"];return e}),Y=(0,_vue.computed)(()=>{var e=A["disabled"];return null===e?!!a&&a.props.disabled:e}),J=(0,_vue.computed)(()=>{var{maxLength:e,maxlength:t}=A,e=e||t;return I.value&&!_xeUtils.default.toNumber(e)?16:e}),o=(0,_vue.computed)(()=>{var e=A["type"];return"time"===e||"datetime"===e}),I=(0,_vue.computed)(()=>-1<["number","integer","float"].indexOf(A.type)),X=(0,_vue.computed)(()=>_xeUtils.default.getSize(L.inputValue)),ee=(0,_vue.computed)(()=>{var e=X.value,t=J.value;return t&&e>_xeUtils.default.toNumber(t)}),O=(0,_vue.computed)(()=>{return o.value||-1<["date","week","month","quarter","year"].indexOf(A.type)}),K=(0,_vue.computed)(()=>"password"===A.type),te=(0,_vue.computed)(()=>"search"===A.type),w=(0,_vue.computed)(()=>_xeUtils.default.toInteger(A.digits)||1),ae=(0,_vue.computed)(()=>{var e=A["type"],t=w.value,a=A.step;return"integer"===e?_xeUtils.default.toInteger(a)||1:"float"===e?_xeUtils.default.toNumber(a)||1/Math.pow(10,t):_xeUtils.default.toNumber(a)||1}),le=(0,_vue.computed)(()=>{var e=A["type"],t=I.value,a=O.value,l=K.value;return A.clearable&&(l||t||a||"text"===e||"search"===e)}),ue=(0,_vue.computed)(()=>A.startDate?_xeUtils.default.toStringDate(A.startDate):null),ie=(0,_vue.computed)(()=>A.endDate?_xeUtils.default.toStringDate(A.endDate):null),ne=(0,_vue.computed)(()=>-1<["date","week","month","quarter","year"].indexOf(A.type)),q=(0,_vue.computed)(()=>{var{modelValue:e,multiple:t}=A,a=O.value;const l=d.value;return t&&e&&a?_xeUtils.default.toValueString(e).split(",").map(e=>{e=v(e,l);return _xeUtils.default.isValidDate(e)?e:null}):[]}),se=(0,_vue.computed)(()=>{var e=q.value;const t=d.value;return e.map(e=>_xeUtils.default.toDateString(e,t))}),re=(0,_vue.computed)(()=>{var e=q.value;const t=_.value;return e.map(e=>_xeUtils.default.toDateString(e,t)).join(", ")}),d=(0,_vue.computed)(()=>{var{type:e,valueFormat:t}=A;return t||("time"===e?"HH:mm:ss":"datetime"===e?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd")}),B=(0,_vue.computed)(()=>{var e=A["modelValue"],t=O.value,a=d.value;let l=null;return l=e&&t&&(t=v(e,a),_xeUtils.default.isValidDate(t))?t:l}),ve=(0,_vue.computed)(()=>{var e=ue.value,t=L["selectMonth"];return!(!t||!e)&&t<=e}),oe=(0,_vue.computed)(()=>{var e=ie.value,t=L["selectMonth"];return!(!t||!e)&&e<=t}),de=(0,_vue.computed)(()=>{var e=L["datetimePanelValue"],t=Te.value;return e?_xeUtils.default.toDateString(e,t?"HH:mm:ss":"HH:mm"):""}),pe=(0,_vue.computed)(()=>{var e=B.value,t=o.value;return e&&t?1e3*(3600*e.getHours()+60*e.getMinutes()+e.getSeconds()):0}),_=(0,_vue.computed)(()=>{var e=A["labelFormat"];return O.value?e||(0,_ui.getI18n)("vxe.input.date.labelFormat."+A.type):""}),_e=(0,_vue.computed)(()=>{var{selectMonth:e,currentDate:t}=L,a=p["yearSize"],l=[];if(e&&t){var u=t.getFullYear(),t=e.getFullYear(),i=new Date(t-t%a,0,1);for(let e=-4;e<a+4;e++){var n=_xeUtils.default.getWhatYear(i,e,"first"),s=n.getFullYear();l.push({date:n,isCurrent:!0,isPrev:e<0,isNow:u===s,isNext:e>=a,year:s})}}return l}),ce=(0,_vue.computed)(()=>{let a="",l="";if(O.value){var{datePanelType:u,selectMonth:i}=L,n=_e.value;let e="",t;i&&(e=i.getFullYear(),t=i.getMonth()+1),"quarter"===u||"month"===u?a=(0,_ui.getI18n)("vxe.datePicker.yearTitle",[e]):"year"===u?a=n.length?n[0].year+" - "+n[n.length-1].year:"":(a=(0,_ui.getI18n)("vxe.datePicker.yearTitle",[e]),l=t?(0,_ui.getI18n)("vxe.input.date.m"+t):"-")}return{y:a,m:l}}),g=(0,_vue.computed)(()=>{var{startDay:e,startWeek:t}=A;return _xeUtils.default.toNumber(_xeUtils.default.isNumber(e)||_xeUtils.default.isString(e)?e:t)}),me=(0,_vue.computed)(()=>{var a=[];if(O.value){let t=g.value;a.push(t);for(let e=0;e<6;e++)6<=t?t=0:t++,a.push(t)}return a}),fe=(0,_vue.computed)(()=>{return O.value?me.value.map(e=>({value:e,label:(0,_ui.getI18n)("vxe.input.date.weeks.w"+e)})):[]}),he=(0,_vue.computed)(()=>{var e;return O.value?(e=fe.value,[{label:(0,_ui.getI18n)("vxe.input.date.weeks.w")}].concat(e)):[]}),xe=(0,_vue.computed)(()=>{var e=_e.value;return _xeUtils.default.chunk(e,4)}),ge=(0,_vue.computed)(()=>{var{selectMonth:e,currentDate:t}=L,a=p["quarterSize"],l=[];if(e&&t){var u=t.getFullYear(),i=(0,_util.getDateQuarter)(t),n=_xeUtils.default.getWhatYear(e,0,"first"),s=n.getFullYear();for(let e=-2;e<a-2;e++){var r=_xeUtils.default.getWhatQuarter(n,e),v=r.getFullYear(),o=(0,_util.getDateQuarter)(r),d=v<s;l.push({date:r,isPrev:d,isCurrent:v===s,isNow:v===u&&o===i,isNext:!d&&s<v,quarter:o})}}return l}),ye=(0,_vue.computed)(()=>{var e=ge.value;return _xeUtils.default.chunk(e,2)}),be=(0,_vue.computed)(()=>{var{selectMonth:t,currentDate:e}=L,a=p["monthSize"],l=[];if(t&&e){var u=e.getFullYear(),i=e.getMonth(),n=_xeUtils.default.getWhatYear(t,0,"first").getFullYear();for(let e=-4;e<a-4;e++){var s=_xeUtils.default.getWhatYear(t,0,e),r=s.getFullYear(),v=s.getMonth(),o=r<n;l.push({date:s,isPrev:o,isCurrent:r===n,isNow:r===u&&v===i,isNext:!o&&n<r,month:v})}}return l}),Ue=(0,_vue.computed)(()=>{var e=be.value;return _xeUtils.default.chunk(e,4)}),Ee=(0,_vue.computed)(()=>{var{selectMonth:t,currentDate:e}=L,a=[];if(t&&e){var l=pe.value,u=me.value,i=e.getFullYear(),n=e.getMonth(),s=e.getDate(),r=t.getFullYear(),v=t.getMonth(),e=t.getDay(),u=-u.indexOf(e),o=new Date(_xeUtils.default.getWhatDay(t,u).getTime()+l);for(let e=0;e<42;e++){var d=_xeUtils.default.getWhatDay(o,e),p=d.getFullYear(),_=d.getMonth(),c=d.getDate(),m=d<t;a.push({date:d,isPrev:m,isCurrent:p===r&&_===v,isNow:p===i&&_===n&&c===s,isNext:!m&&v!==_,label:c})}}return a}),Se=(0,_vue.computed)(()=>{var e=Ee.value;return _xeUtils.default.chunk(e,7)}),Ne=(0,_vue.computed)(()=>{var e=Se.value;const a=g.value;return e.map(e=>{var t=e[0];return[{date:t.date,isWeekNumber:!0,isPrev:!1,isCurrent:!1,isNow:!1,isNext:!1,label:_xeUtils.default.getYearWeek(t.date,a)}].concat(e)})}),De=(0,_vue.computed)(()=>{var t=[];if(o.value)for(let e=0;e<24;e++)t.push({value:e,label:(""+e).padStart(2,"0")});return t}),Ve=(0,_vue.computed)(()=>{var t=[];if(o.value)for(let e=0;e<60;e++)t.push({value:e,label:(""+e).padStart(2,"0")});return t}),Pe=(0,_vue.computed)(()=>{var e=d.value;return!/HH/.test(e)||/mm/.test(e)}),Te=(0,_vue.computed)(()=>{var e=d.value;return!/HH/.test(e)||/ss/.test(e)}),ke=(0,_vue.computed)(()=>{return Ve.value}),we=(0,_vue.computed)(()=>{var{type:e,editable:t,multiple:a}=A;return u.value||a||!t||"week"===e||"quarter"===e}),We=(0,_vue.computed)(()=>{var e=A["type"],t=L["showPwd"],a=I.value,l=O.value,u=K.value;return l||a||u&&t||"number"===e?"text":e}),Me=(0,_vue.computed)(()=>{var e,t=A["placeholder"];return t?(0,_utils.getFuncText)(t):_xeUtils.default.eqNull(t)?(e=(0,_ui.getConfig)().input.placeholder)?(0,_utils.getFuncText)(e):(0,_ui.getI18n)("vxe.base.pleaseInput"):t}),Ce=(0,_vue.computed)(()=>{var{type:e,immediate:t}=A;return t||!("text"===e||"number"===e||"integer"===e||"float"===e)}),Ae=(0,_vue.computed)(()=>{var e=A["type"],t=L["inputValue"];return I.value?"integer"===e?_xeUtils.default.toInteger((0,_util2.handleNumber)(t)):_xeUtils.default.toNumber((0,_util2.handleNumber)(t)):0}),Le=(0,_vue.computed)(()=>{var e=A["min"],t=L["inputValue"],a=I.value,l=Ae.value;return!(!t&&0!==t||!a||null===e)&&l<=_xeUtils.default.toNumber(e)}),Ye=(0,_vue.computed)(()=>{var e=A["max"],t=L["inputValue"],a=I.value,l=Ae.value;return!(!t&&0!==t||!a||null===e)&&l>=_xeUtils.default.toNumber(e)}),Ie=e=>{var{type:t,exponential:a}=A,l=J.value,u=w.value,t="float"===t?(0,_util2.toFloatValueFixed)(e,u):_xeUtils.default.toValueString(e);return!a||e!==t&&_xeUtils.default.toValueString(e).toLowerCase()!==_xeUtils.default.toNumber(t).toExponential()?t.slice(0,l):e},Oe=e=>{E("update:modelValue",e)},c=e=>{var t=L["inputValue"];s.dispatchEvent(e.type,{value:t},e)},m=(e,t)=>{A.trim&&(e=(""+(e||"")).trim()),L.inputValue=e,Oe(e),s.dispatchEvent("input",{value:e},t),_xeUtils.default.toValueString(A.modelValue)!==e&&(s.dispatchEvent("change",{value:e},t),S||N||a&&l&&a.triggerItemEvent(t,l.itemConfig.field,e))},Ke=(e,t)=>{var a=O.value,l=Ce.value;L.inputValue=e,a||(l?m(e,t):s.dispatchEvent("input",{value:e},t))},qe=e=>{var t=e.target.value;Ke(t,e)},Be=e=>{Ce.value||c(e),i.dispatchEvent("lazy-change",{value:L.inputValue},e)},Fe=e=>{var t=L["inputValue"];Ce.value||m(t,e),b(),L.visiblePanel||(L.isActivated=!1),s.dispatchEvent("blur",{value:t},e),S||N||a&&l&&a.triggerItemEvent(e,l.itemConfig.field,t)},Re=e=>{var t=L["inputValue"],a=I.value,l=O.value;L.isActivated=!0,a?L.inputValue=(0,_utils.eqEmptyValue)(t)?"":""+_xeUtils.default.toNumber(t):l&&Dt(e),c(e)},He=e=>{var t;Y.value||(t=L["inputValue"],i.dispatchEvent("prefix-click",{value:t},e))},y=()=>new Promise(e=>{L.visiblePanel=!1,p.hpTimeout=setTimeout(()=>{L.isAniVisible=!1,e()},350)}),Ge=(e,t)=>{var{type:a,autoFocus:l}=A,u=I.value;O.value&&y(),(l||null===l)&&(u||-1<["text","search","password"].indexOf(a))&&focus(),m("",e),i.dispatchEvent("clear",{value:t},e),i.dispatchEvent("lazy-change",{value:t},e)},ze=e=>{var t;Y.value||(t=L["inputValue"],i.dispatchEvent("suffix-click",{value:t},e))},n=e=>{var t=A["type"],a=_.value,l=d.value,u=g.value;let i=null,n="";e&&(i=v(e,l)),_xeUtils.default.isValidDate(i)?(n=_xeUtils.default.toDateString(i,a,{firstDay:u}),a&&"week"===t&&(e=_xeUtils.default.getYearWeek(i,u),(l=_xeUtils.default.getWhatWeek(i,0,1===e?(6+u)%7:u,u).getFullYear())!==i.getFullYear())&&-1<(t=a.indexOf("yyyy"))&&(e=Number(n.substring(t,t+4)))&&!isNaN(e)&&(n=n.replace(""+e,""+l))):i=null,L.datePanelValue=i,L.datePanelLabel=n},$e=()=>{var e=O.value,t=L["inputValue"];e&&(n(t),L.inputValue=A.multiple?re.value:L.datePanelLabel)},je=()=>{var e=A["type"],t=L["inputValue"],a=O.value,l=w.value;a?$e():"float"===e&&t&&t!==(a=(0,_util2.toFloatValueFixed)(t,l))&&m(a,{type:"init"})},Qe=e=>null===A.max||""===A.max||_xeUtils.default.toNumber(e)<=_xeUtils.default.toNumber(A.max),Ze=e=>null===A.min||""===A.min||_xeUtils.default.toNumber(e)>=_xeUtils.default.toNumber(A.min),Je=()=>{L.inputValue=A.multiple?re.value:L.datePanelLabel},f=e=>{var t=g.value,a=_xeUtils.default.getYearWeek(e,t),t=_xeUtils.default.getWhatWeek(e,0,t,t),a=_xeUtils.default.getWhatMonth(1===a?_xeUtils.default.getWhatDay(t,6):e,0,"first");_xeUtils.default.isEqual(a,L.selectMonth)||(L.selectMonth=a)},h=t=>{var{modelValue:e,multiple:a}=A;const l=L["datetimePanelValue"];var u=o.value;const i=d.value;var n=g.value;"week"===A.type?(r=_xeUtils.default.toNumber(A.selectDay),t=_xeUtils.default.getWhatWeek(t,0,r,n)):u&&(t.setHours(l.getHours()),t.setMinutes(l.getMinutes()),t.setSeconds(l.getSeconds()));const s=_xeUtils.default.toDateString(t,i,{firstDay:n});if(f(t),a){var r=se.value;if(u){n=[...q.value];const v=[];a=_xeUtils.default.findIndexOf(n,e=>_xeUtils.default.isDateSame(t,e,"yyyyMMdd"));-1===a?n.push(t):n.splice(a,1),n.forEach(e=>{e&&(e.setHours(l.getHours()),e.setMinutes(l.getMinutes()),e.setSeconds(l.getSeconds()),v.push(e))}),m(v.map(e=>_xeUtils.default.toDateString(e,i)).join(","),{type:"update"})}else r.some(e=>_xeUtils.default.isEqual(e,s))?m(r.filter(e=>!_xeUtils.default.isEqual(e,s)).join(","),{type:"update"}):m(r.concat([s]).join(","),{type:"update"})}else _xeUtils.default.isEqual(e,s)||m(s,{type:"update"})},b=()=>{var{type:a,min:t,max:l,exponential:u}=A,{inputValue:i,datetimePanelValue:n}=L,s=I.value,e=O.value,r=_.value;if(!we.value)if(s){if(i){var s=""+(0,_util2.handleNumber)(i);if(s){let e="integer"===a?_xeUtils.default.toInteger(s):_xeUtils.default.toNumber(s);Ze(e)?Qe(e)||(e=l):e=t,u&&(s=_xeUtils.default.toValueString(i).toLowerCase())===_xeUtils.default.toNumber(e).toExponential()&&(e=s),m(Ie(e),{type:"check"})}else{let e=!t&&0!==t?"":""+t;m(e,{type:"check"})}}}else if(e)if(i){let t=v(i,r);if(_xeUtils.default.isValidDate(t))if("time"===a)i!==(t=_xeUtils.default.toDateString(t,r))&&m(t,{type:"check"}),L.inputValue=t;else{let e=!1;l=g.value;"datetime"===a?(u=B.value,i===_xeUtils.default.toDateString(u,r)&&i===_xeUtils.default.toDateString(t,r)||(e=!0,n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds()))):e=!0,L.inputValue=_xeUtils.default.toDateString(t,r,{firstDay:l}),e&&h(t)}else Je()}else m("",{type:"check"})},Xe=e=>{var t=L["showPwd"],a=Y.value,l=u.value;a||l||(L.showPwd=!t),s.dispatchEvent("toggle-visible",{visible:L.showPwd},e)},et=e=>{s.dispatchEvent("search-click",{},e)},tt=(e,t)=>{var{min:a,max:l,type:u}=A,i=L["inputValue"],n=ae.value,u="integer"===u?_xeUtils.default.toInteger((0,_util2.handleNumber)(i)):_xeUtils.default.toNumber((0,_util2.handleNumber)(i)),i=e?_xeUtils.default.add(u,n):_xeUtils.default.subtract(u,n);let s;s=Ze(i)?Qe(i)?i:l:a,Ke(Ie(s),t)},r=e=>{var t=Y.value,a=u.value,l=Le.value;U(),t||a||l||tt(!1,e),s.dispatchEvent("next-number",{value:L.inputValue},e)},at=e=>{p.dnTimeout=setTimeout(()=>{r(e),at(e)},60)},x=e=>{var t=Y.value,a=u.value,l=Ye.value;U(),t||a||l||tt(!0,e),s.dispatchEvent("prev-number",{value:L.inputValue},e)},lt=e=>{var t=_ui.globalEvents.hasKey(e,_ui.GLOBAL_EVENT_KEYS.ARROW_UP),a=_ui.globalEvents.hasKey(e,_ui.GLOBAL_EVENT_KEYS.ARROW_DOWN);(t||a)&&(e.preventDefault(),(t?x:r)(e))},ut=e=>{var t,a,l,u,i,n,s,{type:r,exponential:v,controls:o}=A;I.value&&(t=(0,_dom.hasControlKey)(e),a=e.shiftKey,l=e.altKey,u=e.keyCode,i=_ui.globalEvents.hasKey(e,_ui.GLOBAL_EVENT_KEYS.ESCAPE),n=_ui.globalEvents.hasKey(e,_ui.GLOBAL_EVENT_KEYS.ARROW_UP),s=_ui.globalEvents.hasKey(e,_ui.GLOBAL_EVENT_KEYS.ARROW_DOWN),t||a||l||(_ui.globalEvents.hasKey(e,_ui.GLOBAL_EVENT_KEYS.SPACEBAR)||"integer"===r&&110===u||(!v||69!==u)&&65<=u&&u<=90||186<=u&&u<=188||191<=u)&&e.preventDefault(),i?b():(n||s)&&o&&lt(e)),c(e)},it=e=>{c(e)},U=()=>{var e=p["dnTimeout"];e&&(clearTimeout(e),p.dnTimeout=void 0)},nt=e=>{p.dnTimeout=setTimeout(()=>{x(e),nt(e)},60)},st=e=>{if(U(),0===e.button){const t=(0,_dom.hasClass)(e.currentTarget,"is--prev");(t?x:r)(e),p.dnTimeout=setTimeout(()=>{(t?nt:at)(e)},500)}},rt=e=>{var t;I.value&&A.controls&&L.isActivated&&(0<(t=e.deltaY)?r(e):t<0&&x(e),e.preventDefault()),c(e)},vt=(e,t)=>{var a=g.value,l=_xeUtils.default.getYearWeek(e,a),a=_xeUtils.default.getWhatWeek(e,0,a,a),l=_xeUtils.default.getWhatMonth(1===l?_xeUtils.default.getWhatDay(a,6):e,t,"first");L.selectMonth=l},ot=()=>{var e=_xeUtils.default.getWhatDay(Date.now(),0,"first");L.currentDate=e,vt(e,0)},dt=()=>{L.datePanelType="year"},pt=()=>{let e=L["datePanelType"];e="month"===e||"quarter"===e?"year":"month",L.datePanelType=e},_t=t=>{var a=A["type"],{datePanelType:l,selectMonth:u,inputValue:i}=L,n=p["yearSize"];if(!ve.value){let e;e="year"===a?_xeUtils.default.getWhatYear(u,-n,"first"):"month"===a||"quarter"===a?"year"===l?_xeUtils.default.getWhatYear(u,-n,"first"):_xeUtils.default.getWhatYear(u,-1,"first"):"year"===l?_xeUtils.default.getWhatYear(u,-n,"first"):"month"===l?_xeUtils.default.getWhatYear(u,-1,"first"):_xeUtils.default.getWhatMonth(u,-1,"first"),L.selectMonth=e,s.dispatchEvent("date-prev",{viewType:l,viewDate:e,value:i,type:a},t)}},ct=e=>{ot(),A.multiple||(h(L.currentDate),y()),s.dispatchEvent("date-today",{type:A.type},e)},mt=t=>{var a=A["type"],{datePanelType:l,selectMonth:u,inputValue:i}=L,n=p["yearSize"];if(!oe.value){let e;e="year"===a?_xeUtils.default.getWhatYear(u,n,"first"):"month"===a||"quarter"===a?"year"===l?_xeUtils.default.getWhatYear(u,n,"first"):_xeUtils.default.getWhatYear(u,1,"first"):"year"===l?_xeUtils.default.getWhatYear(u,n,"first"):"month"===l?_xeUtils.default.getWhatYear(u,1,"first"):_xeUtils.default.getWhatMonth(u,1,"first"),L.selectMonth=e,s.dispatchEvent("date-next",{viewType:l,viewDate:e,value:i,type:a},t)}},F=e=>{var t=A["disabledMethod"],a=L["datePanelType"],l=ue.value,u=ie.value,e=e["date"];return!!(l&&l.getTime()>e.getTime())||!!(u&&u.getTime()<e.getTime())||!!t&&t({type:a,viewType:a,date:e,$input:i})},ft=e=>{var{type:t,multiple:a}=A,l=L["datePanelType"];"month"===t?"year"===l?(L.datePanelType="month",f(e)):(h(e),a||y()):"year"===t?(h(e),a||y()):"quarter"===t?"year"===l?(L.datePanelType="quarter",f(e)):(h(e),a||y()):"month"===l?(L.datePanelType="week"===t?t:"day",f(e)):"year"===l?(L.datePanelType="month",f(e)):(h(e),"datetime"===t||a||y())},R=e=>{F(e)||ft(e.date)},ht=t=>{F({date:t})||(Ee.value.some(e=>_xeUtils.default.isDateSame(e.date,t,"yyyyMMdd"))||f(t),n(t))},xt=t=>{F({date:t})||(_e.value.some(e=>_xeUtils.default.isDateSame(e.date,t,"yyyy"))||f(t),n(t))},gt=t=>{F({date:t})||(ge.value.some(e=>_xeUtils.default.isDateSame(e.date,t,"yyyyq"))||f(t),n(t))},yt=t=>{F({date:t})||(be.value.some(e=>_xeUtils.default.isDateSame(e.date,t,"yyyyMM"))||f(t),n(t))},H=e=>{var t;F(e)||(t=L["datePanelType"],("month"===t?yt:"quarter"===t?gt:"year"===t?xt:ht)(e.date))},bt=e=>{var t;e&&(t=e.offsetHeight,e.parentNode.scrollTop=e.offsetTop-4*t)},Ut=e=>{L.datetimePanelValue=new Date(L.datetimePanelValue.getTime()),bt(e.currentTarget)},Et=()=>{var e=A["multiple"];const t=L["datetimePanelValue"];var a=B.value,l=o.value;if(l){const u=d.value;if(e){e=se.value;if(l){l=[...q.value];const i=[];l.forEach(e=>{e&&(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),i.push(e))}),m(i.map(e=>_xeUtils.default.toDateString(e,u)).join(","),{type:"update"})}else m(e.join(","),{type:"update"})}else h(a||L.currentDate)}y()},St=()=>(0,_vue.nextTick)().then(()=>{var l=A["placement"],u=L["panelIndex"],i=M.value,n=j.value,e=Q.value;if(i&&n){var s=i.offsetHeight,r=i.offsetWidth,v=n.offsetHeight,n=n.offsetWidth,u={zIndex:u},{boundingTop:i,boundingLeft:o,visibleHeight:d,visibleWidth:p}=(0,_dom.getAbsolutePos)(i);let a="bottom";if(e){let e=o,t=i+s;"top"===l?(a="top",t=i-v):l||(t+v+5>d&&(a="top",t=i-v),t<5&&(a="bottom",t=i+s)),e+n+5>p&&(e-=e+n+5-p),e<5&&(e=5),Object.assign(u,{left:e+"px",top:t+"px",minWidth:r+"px"})}else"top"===l?(a="top",u.bottom=s+"px"):l||(u.top=s+"px",d<i+s+v&&5<i-s-v&&(a="top",u.top="",u.bottom=s+"px"));return L.panelStyle=u,L.panelPlacement=a,(0,_vue.nextTick)()}}),Nt=()=>{var e=L["visiblePanel"],t=p["hpTimeout"],a=Y.value,l=O.value;return(a||e?(0,_vue.nextTick):(L.initialized||(L.initialized=!0),t&&(clearTimeout(t),p.hpTimeout=void 0),L.isActivated=!0,L.isAniVisible=!0,l&&(a=A.type,e=o.value,t=B.value,-1<["year","quarter","month","week"].indexOf(a)?L.datePanelType=a:L.datePanelType="day",L.currentDate=_xeUtils.default.getWhatDay(Date.now(),0,"first"),t?(vt(t,0),n(t)):ot(),e)&&(L.datetimePanelValue=L.datePanelValue||_xeUtils.default.getWhatDay(Date.now(),0,"first"),(0,_vue.nextTick)(()=>{var e=T.value;_xeUtils.default.arrayEach(e.querySelectorAll("li.is--selected"),e=>{bt(e)})})),setTimeout(()=>{L.visiblePanel=!0},10),L.panelIndex<(0,_utils.getLastZIndex)()&&(L.panelIndex=(0,_utils.nextZIndex)()),St))()},Dt=e=>{u.value||(e.preventDefault(),Nt())},Vt=e=>{c(e)},Pt=e=>{var{visiblePanel:t,isActivated:a}=L,l=O.value,u=W.value,i=C.value;!Y.value&&a&&(L.isActivated=(0,_dom.getEventTargetNode)(e,u).flag||(0,_dom.getEventTargetNode)(e,i).flag,L.isActivated||(l?t&&(y(),b()):b()))},Tt=t=>{var a=A["clearable"],l=L["visiblePanel"],u=Y.value,i=O.value;if(!u){var u=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.TAB),n=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.DELETE),s=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ESCAPE),r=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ENTER),v=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ARROW_LEFT),o=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ARROW_UP),d=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ARROW_RIGHT),p=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ARROW_DOWN),_=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.PAGE_UP),c=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.PAGE_DOWN),v=v||o||d||p;let e=L.isActivated;if(u)e&&b(),e=!1,L.isActivated=e;else if(v){if(i&&e)if(l){var d=t,{isActivated:v,datePanelValue:m,datePanelType:f}=L;if(v){d.preventDefault();var v=_ui.globalEvents.hasKey(d,_ui.GLOBAL_EVENT_KEYS.ARROW_LEFT),h=_ui.globalEvents.hasKey(d,_ui.GLOBAL_EVENT_KEYS.ARROW_UP),x=_ui.globalEvents.hasKey(d,_ui.GLOBAL_EVENT_KEYS.ARROW_RIGHT),d=_ui.globalEvents.hasKey(d,_ui.GLOBAL_EVENT_KEYS.ARROW_DOWN);if("year"===f){let e=_xeUtils.default.getWhatYear(m||Date.now(),0,"first");v?e=_xeUtils.default.getWhatYear(e,-1):h?e=_xeUtils.default.getWhatYear(e,-4):x?e=_xeUtils.default.getWhatYear(e,1):d&&(e=_xeUtils.default.getWhatYear(e,4)),xt(e)}else if("quarter"===f){let e=_xeUtils.default.getWhatQuarter(m||Date.now(),0,"first");v?e=_xeUtils.default.getWhatQuarter(e,-1):h?e=_xeUtils.default.getWhatQuarter(e,-2):x?e=_xeUtils.default.getWhatQuarter(e,1):d&&(e=_xeUtils.default.getWhatQuarter(e,2)),gt(e)}else if("month"===f){let e=_xeUtils.default.getWhatMonth(m||Date.now(),0,"first");v?e=_xeUtils.default.getWhatMonth(e,-1):h?e=_xeUtils.default.getWhatMonth(e,-4):x?e=_xeUtils.default.getWhatMonth(e,1):d&&(e=_xeUtils.default.getWhatMonth(e,4)),yt(e)}else{let e=m||_xeUtils.default.getWhatDay(Date.now(),0,"first");f=g.value;v?e=_xeUtils.default.getWhatDay(e,-1):h?e=_xeUtils.default.getWhatWeek(e,-1,f):x?e=_xeUtils.default.getWhatDay(e,1):d&&(e=_xeUtils.default.getWhatWeek(e,1,f)),ht(e)}}}else(o||p)&&Dt(t)}else r?i&&(l?L.datePanelValue?ft(L.datePanelValue):y():e&&Dt(t)):(_||c)&&i&&e&&(m=t,v=L.isActivated)&&(v=_ui.globalEvents.hasKey(m,_ui.GLOBAL_EVENT_KEYS.PAGE_UP),m.preventDefault(),(v?_t:mt)(m));u||s?l&&y():n&&a&&e&&Ge(t,null)}},kt=e=>{var t=L["visiblePanel"];Y.value||t&&(t=C.value,((0,_dom.getEventTargetNode)(e,t).flag?St:(y(),b))())},wt=()=>{var{isActivated:e,visiblePanel:t}=L;t&&y(),e&&(L.isActivated=!1),(t||e)&&(t=M.value,b(),t)&&t.blur()},G=(e,t)=>{var a,l=A["festivalMethod"];return l?(a=L["datePanelType"],e=(a=(l=l({type:a,viewType:a,date:e.date,$input:i}))?_xeUtils.default.isString(l)?{label:l}:l:{}).extra?_xeUtils.default.isString(a.extra)?{label:a.extra}:a.extra:null,l=[(0,_vue.h)("span",{class:["vxe-input--date-label",{"is-notice":a.notice}]},e&&e.label?[(0,_vue.h)("span",""+(t||"")),(0,_vue.h)("span",{class:["vxe-input--date-label--extra",e.important?"is-important":"",e.className],style:e.style},_xeUtils.default.toValueString(e.label))]:[""+(t||"")])],(e=a.label)&&(e=_xeUtils.default.toValueString(e).split(","),l.push((0,_vue.h)("span",{class:["vxe-input--date-festival",a.important?"is-important":"",a.className],style:a.style},[1<e.length?(0,_vue.h)("span",{class:["vxe-input--date-festival--overlap","overlap--"+e.length]},e.map(e=>(0,_vue.h)("span",e.substring(0,3)))):(0,_vue.h)("span",{class:"vxe-input--date-festival--label"},e[0].substring(0,3))]))),l):[""+(t||"")]},Wt=()=>{var e=L["datePanelType"];switch(e){case"week":{const i=A["multiple"],{datePanelType:n,datePanelValue:s}=L,r=B.value;var t=he.value,a=Ne.value;const v=q.value,o="yyyyMMdd";return[(0,_vue.h)("table",{class:`vxe-input--date-${n}-view`,cellspacing:0,cellpadding:0,border:0},[(0,_vue.h)("thead",[(0,_vue.h)("tr",t.map(e=>(0,_vue.h)("th",e.label)))]),(0,_vue.h)("tbody",a.map(e=>{const t=i?e.some(t=>v.some(e=>_xeUtils.default.isDateSame(e,t.date,o))):e.some(e=>_xeUtils.default.isDateSame(r,e.date,o)),a=e.some(e=>_xeUtils.default.isDateSame(s,e.date,o));return(0,_vue.h)("tr",e.map(e=>(0,_vue.h)("td",{class:{"is--prev":e.isPrev,"is--current":e.isCurrent,"is--now":e.isNow,"is--next":e.isNext,"is--disabled":F(e),"is--selected":t,"is--hover":a},onClick:()=>R(e),onMouseenter:()=>H(e)},G(e,e.label))))}))])];return}case"month":{const d=A["multiple"],{datePanelType:p,datePanelValue:_}=L,c=B.value;t=Ue.value;const m=q.value,f="yyyyMM";return[(0,_vue.h)("table",{class:`vxe-input--date-${p}-view`,cellspacing:0,cellpadding:0,border:0},[(0,_vue.h)("tbody",t.map(e=>(0,_vue.h)("tr",e.map(t=>(0,_vue.h)("td",{class:{"is--prev":t.isPrev,"is--current":t.isCurrent,"is--now":t.isNow,"is--next":t.isNext,"is--disabled":F(t),"is--selected":d?m.some(e=>_xeUtils.default.isDateSame(e,t.date,f)):_xeUtils.default.isDateSame(c,t.date,f),"is--hover":_xeUtils.default.isDateSame(_,t.date,f)},onClick:()=>R(t),onMouseenter:()=>H(t)},G(t,(0,_ui.getI18n)("vxe.input.date.months.m"+t.month)))))))])];return}case"quarter":{const h=A["multiple"],{datePanelType:x,datePanelValue:g}=L,y=B.value;a=ye.value;const b=q.value,U="yyyyq";return[(0,_vue.h)("table",{class:`vxe-input--date-${x}-view`,cellspacing:0,cellpadding:0,border:0},[(0,_vue.h)("tbody",a.map(e=>(0,_vue.h)("tr",e.map(t=>(0,_vue.h)("td",{class:{"is--prev":t.isPrev,"is--current":t.isCurrent,"is--now":t.isNow,"is--next":t.isNext,"is--disabled":F(t),"is--selected":h?b.some(e=>_xeUtils.default.isDateSame(e,t.date,U)):_xeUtils.default.isDateSame(y,t.date,U),"is--hover":_xeUtils.default.isDateSame(g,t.date,U)},onClick:()=>R(t),onMouseenter:()=>H(t)},G(t,(0,_ui.getI18n)("vxe.input.date.quarters.q"+t.quarter)))))))])];return}case"year":{const E=A["multiple"],{datePanelType:S,datePanelValue:N}=L,D=B.value;var l=xe.value;const V=q.value,P="yyyy";return[(0,_vue.h)("table",{class:`vxe-input--date-${S}-view`,cellspacing:0,cellpadding:0,border:0},[(0,_vue.h)("tbody",l.map(e=>(0,_vue.h)("tr",e.map(t=>(0,_vue.h)("td",{class:{"is--prev":t.isPrev,"is--current":t.isCurrent,"is--now":t.isNow,"is--next":t.isNext,"is--disabled":F(t),"is--selected":E?V.some(e=>_xeUtils.default.isDateSame(e,t.date,P)):_xeUtils.default.isDateSame(D,t.date,P),"is--hover":_xeUtils.default.isDateSame(N,t.date,P)},onClick:()=>R(t),onMouseenter:()=>H(t)},G(t,t.year))))))])];return}}{const T=A["multiple"],{datePanelType:k,datePanelValue:w}=L,W=B.value;var e=fe.value,u=Se.value;const M=q.value,C="yyyyMMdd";return[(0,_vue.h)("table",{class:`vxe-input--date-${k}-view`,cellspacing:0,cellpadding:0,border:0},[(0,_vue.h)("thead",[(0,_vue.h)("tr",e.map(e=>(0,_vue.h)("th",e.label)))]),(0,_vue.h)("tbody",u.map(e=>(0,_vue.h)("tr",e.map(t=>(0,_vue.h)("td",{class:{"is--prev":t.isPrev,"is--current":t.isCurrent,"is--now":t.isNow,"is--next":t.isNext,"is--disabled":F(t),"is--selected":T?M.some(e=>_xeUtils.default.isDateSame(e,t.date,C)):_xeUtils.default.isDateSame(W,t.date,C),"is--hover":_xeUtils.default.isDateSame(w,t.date,C)},onClick:()=>R(t),onMouseenter:()=>H(t)},G(t,t.label))))))])]}},Mt=()=>{var e=A["multiple"],t=L["datePanelType"],a=ve.value,l=oe.value,u=ce.value;return[(0,_vue.h)("div",{class:"vxe-input--date-picker-header"},[(0,_vue.h)("div",{class:"vxe-input--date-picker-type-wrapper"},["year"===t?(0,_vue.h)("span",{class:"vxe-input--date-picker-label"},u.y):(0,_vue.h)("span",{class:"vxe-input--date-picker-btns"},[(0,_vue.h)("span",{class:"vxe-input--date-picker-btn",onClick:dt},u.y),u.m?(0,_vue.h)("span",{class:"vxe-input--date-picker-btn",onClick:pt},u.m):(0,_ui.renderEmptyElement)(i)])]),(0,_vue.h)("div",{class:"vxe-input--date-picker-btn-wrapper"},[(0,_vue.h)("span",{class:["vxe-input--date-picker-btn vxe-input--date-picker-prev-btn",{"is--disabled":a}],onClick:_t},[(0,_vue.h)("i",{class:"vxe-icon-caret-left"})]),(0,_vue.h)("span",{class:"vxe-input--date-picker-btn vxe-input--date-picker-current-btn",onClick:ct},[(0,_vue.h)("i",{class:"vxe-icon-dot"})]),(0,_vue.h)("span",{class:["vxe-input--date-picker-btn vxe-input--date-picker-next-btn",{"is--disabled":l}],onClick:mt},[(0,_vue.h)("i",{class:"vxe-icon-caret-right"})]),e&&ne.value?(0,_vue.h)("span",{class:"vxe-input--date-picker-btn vxe-input--date-picker-confirm-btn"},[(0,_vue.h)("button",{class:"vxe-input--date-picker-confirm",type:"button",onClick:Et},(0,_ui.getI18n)("vxe.button.confirm"))]):null])]),(0,_vue.h)("div",{class:"vxe-input--date-picker-body"},Wt())]},Ct=()=>{const t=L["datetimePanelValue"];var e=de.value,a=De.value,l=Pe.value,u=Ve.value,i=Te.value,n=ke.value;return[(0,_vue.h)("div",{class:"vxe-input--time-picker-header"},[l?(0,_vue.h)("span",{class:"vxe-input--time-picker-title"},e):(0,_vue.createCommentVNode)(),(0,_vue.h)("div",{class:"vxe-input--time-picker-btn"},[(0,_vue.h)("button",{class:"vxe-input--time-picker-confirm",type:"button",onClick:Et},(0,_ui.getI18n)("vxe.button.confirm"))])]),(0,_vue.h)("div",{ref:T,class:"vxe-input--time-picker-body"},[(0,_vue.h)("ul",{class:"vxe-input--time-picker-hour-list"},a.map((a,e)=>(0,_vue.h)("li",{key:e,class:{"is--selected":t&&t.getHours()===a.value},onClick:e=>{return e=e,t=a,L.datetimePanelValue.setHours(t.value),void Ut(e);var t}},a.label))),l?(0,_vue.h)("ul",{class:"vxe-input--time-picker-minute-list"},u.map((a,e)=>(0,_vue.h)("li",{key:e,class:{"is--selected":t&&t.getMinutes()===a.value},onClick:e=>{return e=e,t=a,L.datetimePanelValue.setMinutes(t.value),void Ut(e);var t}},a.label))):(0,_vue.createCommentVNode)(),l&&i?(0,_vue.h)("ul",{class:"vxe-input--time-picker-second-list"},n.map((a,e)=>(0,_vue.h)("li",{key:e,class:{"is--selected":t&&t.getSeconds()===a.value},onClick:e=>{return e=e,t=a,L.datetimePanelValue.setSeconds(t.value),void Ut(e);var t}},a.label))):(0,_vue.createCommentVNode)()])]},At=()=>{var e=A["controls"],t=I.value,a=O.value,l=K.value,u=te.value;return l?(l=L.showPwd,(0,_vue.h)("div",{class:"vxe-input--control-icon",onClick:Xe},[(0,_vue.h)("i",{class:["vxe-input--password-icon",l?(0,_ui.getIcon)().PASSWORD_INPUT_SHOW_PWD:(0,_ui.getIcon)().PASSWORD_INPUT_HIDE_PWD]})])):t&&e?(l=Ye.value,t=Le.value,(0,_vue.h)("div",{class:"vxe-input--control-icon"},[(0,_vue.h)("div",{class:"vxe-input--number-icon"},[(0,_vue.h)("div",{class:["vxe-input--number-btn is--prev",{"is--disabled":l}],onMousedown:st,onMouseup:U,onMouseleave:U},[(0,_vue.h)("i",{class:(0,_ui.getIcon)().INPUT_PLUS_NUM})]),(0,_vue.h)("div",{class:["vxe-input--number-btn is--next",{"is--disabled":t}],onMousedown:st,onMouseup:U,onMouseleave:U},[(0,_vue.h)("i",{class:(0,_ui.getIcon)().INPUT_MINUS_NUM})])])])):a?(0,_vue.h)("div",{class:"vxe-input--control-icon",onClick:Dt},[(0,_vue.h)("i",{class:["vxe-input--date-picker-icon",(0,_ui.getIcon)().DATE_PICKER_DATE]})]):u?(0,_vue.h)("div",{class:"vxe-input--control-icon",onClick:et},[(0,_vue.h)("i",{class:["vxe-input--search-icon",(0,_ui.getIcon)().INPUT_SEARCH]})]):(0,_vue.createCommentVNode)()};s={dispatchEvent:(e,t,a)=>{E(e,(0,_ui.createEvent)(a,{$input:i},t))},focus(){var e=M.value;return L.isActivated=!0,e.focus(),(0,_vue.nextTick)()},blur(){return M.value.blur(),(L.isActivated=!1,_vue.nextTick)()},select(){return M.value.select(),(L.isActivated=!1,_vue.nextTick)()},showPanel:Nt,hidePanel:y,updatePlacement:St},Object.assign(i,s);return(0,_vue.watch)(()=>A.modelValue,e=>{L.inputValue=e,$e()}),(0,_vue.watch)(()=>A.type,()=>{Object.assign(L,{inputValue:A.modelValue,datetimePanelValue:null,datePanelValue:null,datePanelLabel:"",datePanelType:"day",selectMonth:null,currentDate:null}),je()}),(0,_vue.watch)(_,()=>{O.value&&(n(L.datePanelValue),L.inputValue=A.multiple?re.value:L.datePanelLabel)}),(0,_vue.onMounted)(()=>{var e=A["type"],e=(["date","time","datetime","week","month","quarter","year"].includes(e)?(0,_log.warnLog)("vxe.error.useNew",[`<vxe-input type="${e}" ... />`,`<vxe-date-picker type="${e}" ... />`]):["number","integer","float"].includes(e)?(0,_log.warnLog)("vxe.error.useNew",[`<vxe-input type="${e}" ... />`,`<vxe-number-input type="${e}" ... />`]):["password"].includes(e)&&(0,_log.warnLog)("vxe.error.useNew",[`<vxe-input type="${e}" ... />`,"<vxe-password-input ... />"]),M.value);e&&e.addEventListener("wheel",rt,{passive:!1}),_ui.globalEvents.on(i,"mousewheel",kt),_ui.globalEvents.on(i,"mousedown",Pt),_ui.globalEvents.on(i,"keydown",Tt),_ui.globalEvents.on(i,"blur",wt)}),(0,_vue.onBeforeUnmount)(()=>{U(),b();var e=M.value;e&&e.removeEventListener("wheel",rt),_ui.globalEvents.off(i,"mousewheel"),_ui.globalEvents.off(i,"mousedown"),_ui.globalEvents.off(i,"keydown"),_ui.globalEvents.off(i,"blur")}),je(),i.renderVN=()=>{var e,t,a,l,u,i,n,s,r,v,o,d,p,_,c,m,f,{className:h,controls:x,type:g,title:y,align:b,showWordCount:U,countMethod:E,name:S,autoComplete:N,autocomplete:D}=A,{inputValue:V,visiblePanel:P,isActivated:T}=L,k=$.value,w=Y.value;return Z.value?(0,_vue.h)("div",{ref:W,class:["vxe-input--readonly","type--"+g,h]},V):(e=ee.value,t=X.value,a=we.value,l=J.value,u=We.value,i=Me.value,n=le.value,U=U&&["text","search"].includes(g),r=A.prefixIcon,s=(s=z.prefix)||r?(0,_vue.h)("div",{class:"vxe-input--prefix",onClick:He},[(0,_vue.h)("div",{class:"vxe-input--prefix-icon"},s?(0,_vn.getSlotVNs)(s({})):[(0,_vue.h)("i",{class:r})])]):null,r=A.suffixIcon,v=L.inputValue,o=z.suffix,d=Y.value,p=I.value,_=O.value,c=K.value,m=te.value,f=le.value,c=c||p||_||m,p=f||o||r||c?(0,_vue.h)("div",{class:["vxe-input--suffix",{"is--clear":f&&!d&&!(""===v||_xeUtils.default.eqNull(v))}]},[f?(0,_vue.h)("div",{class:"vxe-input--clear-icon",onClick:Ge},[(0,_vue.h)("i",{class:(0,_ui.getIcon)().INPUT_CLEAR})]):(0,_vue.createCommentVNode)(),(c?At:(0,_vue.createCommentVNode))(),o||r?(0,_vue.h)("div",{class:"vxe-input--suffix-icon",onClick:ze},o?(0,_vn.getSlotVNs)(o({})):[(0,_vue.h)("i",{class:r})]):(0,_vue.createCommentVNode)()]):null,(0,_vue.h)("div",{ref:W,class:["vxe-input","type--"+g,h,{["size--"+k]:k,["is--"+b]:b,"is--controls":x,"is--prefix":!!s,"is--suffix":!!p,"is--visible":P,"is--count":U,"is--disabled":w,"is--active":T,"show--clear":n&&!w&&!(""===V||_xeUtils.default.eqNull(V))}],spellcheck:!1},[s||(0,_vue.createCommentVNode)(),(0,_vue.h)("div",{class:"vxe-input--wrapper",title:y||null},[(0,_vue.h)("input",{ref:M,class:"vxe-input--inner",value:V,name:S,type:u,placeholder:i,maxlength:l,readonly:a,disabled:w,autocomplete:N||D,onKeydown:ut,onKeyup:it,onClick:Vt,onInput:qe,onChange:Be,onFocus:Re,onBlur:Fe})]),p||(0,_vue.createCommentVNode)(),(()=>{var e=A["type"],{initialized:t,isAniVisible:a,visiblePanel:l,panelPlacement:u,panelStyle:i}=L,n=$.value,s=Q.value,r=[];return O.value?(r.push("datetime"===e?(0,_vue.h)("div",{key:e,ref:C,class:"vxe-input--panel-layout-wrapper"},[(0,_vue.h)("div",{class:"vxe-input--panel-left-wrapper"},Mt()),(0,_vue.h)("div",{class:"vxe-input--panel-right-wrapper"},Ct())]):"time"===e?(0,_vue.h)("div",{key:e,ref:C,class:"vxe-input--panel-wrapper"},Ct()):(0,_vue.h)("div",{key:e||"default",ref:C,class:"vxe-input--panel-wrapper"},Mt())),(0,_vue.h)(_vue.Teleport,{to:"body",disabled:!s||!t},[(0,_vue.h)("div",{ref:j,class:["vxe-table--ignore-clear vxe-input--panel","type--"+e,{["size--"+n]:n,"is--transfer":s,"ani--leave":a,"ani--enter":l}],placement:u,style:i},l||a?r:[])])):(0,_vue.createCommentVNode)()})(),U?(0,_vue.h)("span",{class:["vxe-input--count",{"is--error":e}]},E?""+E({value:V}):t+(l?"/"+l:"")):(0,_vue.createCommentVNode)()]))},i},render(){return this.renderVN()}});