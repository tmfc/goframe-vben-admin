{"version":3,"file":"PanelContent.js","sources":["../../../../../components/date-picker/components/panel/PanelContent.tsx"],"sourcesContent":["import { defineComponent, PropType } from 'vue';\nimport { isFunction, isArray } from 'lodash-es';\nimport { usePrefixClass } from '@tdesign/shared-hooks';\nimport type { TdDatePickerProps, TdDateRangePickerProps, DateRangePickerPartial } from '../../type';\n\nimport TDateHeader from '../base/Header';\nimport TDateTable from '../base/Table';\nimport TTimePickerPanel from '../../../time-picker/panel/time-picker-panel';\nimport { getDefaultFormat } from '@tdesign/common-js/date-picker/format';\nimport type { DateValue } from '@tdesign/common-js/date-picker/utils';\nimport { parseToDateTime } from '../../utils';\n\nexport default defineComponent({\n  name: 'TPanelContent',\n  props: {\n    mode: String as PropType<TdDatePickerProps['mode']>,\n    format: String as PropType<TdDatePickerProps['format']>,\n    enableTimePicker: Boolean as PropType<TdDatePickerProps['enableTimePicker']>,\n    timePickerProps: {\n      type: Object as PropType<TdDatePickerProps['timePickerProps']>,\n      default: () => ({}),\n    },\n    year: Number,\n    month: Number,\n    tableData: Array,\n    time: String,\n    multiple: Boolean,\n    firstDayOfWeek: Number,\n    partial: String,\n    popupVisible: Boolean,\n    onYearChange: Function,\n    onMonthChange: Function,\n    onJumperClick: Function,\n    onCellMouseEnter: Function,\n    onCellClick: Function,\n    onCellMouseLeave: Function,\n    onTimePickerChange: Function,\n    value: [String, Number, Array, Date],\n    internalYear: Array as PropType<Array<number>>,\n    disableTime: Function as PropType<TdDateRangePickerProps['disableTime']>,\n    defaultTime: [String, Array] as PropType<TdDatePickerProps['defaultTime'] | TdDateRangePickerProps['defaultTime']>,\n  },\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('date-picker__panel');\n\n    const { timeFormat } = getDefaultFormat({\n      mode: props.mode,\n      format: props.format,\n      enableTimePicker: props.enableTimePicker,\n    });\n\n    const disableTimeOptions = () => {\n      if (!isFunction(props.disableTime)) {\n        return {};\n      }\n\n      const startValue = isArray(props.value) ? props.value[0] : props.value;\n      const endValue = isArray(props.value) ? props.value[1] : props.value;\n\n      return props.disableTime(\n        [parseToDateTime(startValue as DateValue, props.format), parseToDateTime(endValue as DateValue, props.format)],\n        {\n          partial: props.partial as DateRangePickerPartial,\n        },\n      );\n    };\n\n    const defaultTimeValue = '00:00:00';\n\n    return () => (\n      <div class={`${COMPONENT_NAME.value}-content`}>\n        <div class={`${COMPONENT_NAME.value}-${props.mode}`}>\n          <TDateHeader\n            mode={props.mode}\n            year={props.year}\n            month={props.month}\n            internalYear={props.internalYear}\n            partial={props.partial}\n            onMonthChange={(val: number) => props.onMonthChange?.(val, { partial: props.partial })}\n            onYearChange={(val: number) => props.onYearChange?.(val, { partial: props.partial })}\n            onJumperClick={({ trigger }: { trigger: string }) =>\n              props.onJumperClick?.({ trigger, partial: props.partial })\n            }\n          />\n\n          <TDateTable\n            mode={props.mode}\n            data={props.tableData}\n            time={props.time}\n            value={props.value}\n            format={props.format}\n            multiple={props.multiple}\n            firstDayOfWeek={props.firstDayOfWeek}\n            onCellClick={(date: Date, { e }: { e: MouseEvent }) =>\n              props.onCellClick?.(date, { e, partial: props.partial })\n            }\n            onCellMouseEnter={(date: Date) => props.onCellMouseEnter?.(date, { partial: props.partial })}\n            onCellMouseLeave={props.onCellMouseLeave}\n          />\n        </div>\n\n        {props.enableTimePicker && (\n          <div class={`${COMPONENT_NAME.value}-time`}>\n            <div class={`${COMPONENT_NAME.value}-time-viewer`}>{props.time || defaultTimeValue}</div>\n            <TTimePickerPanel\n              {...{\n                key: props.partial,\n                isShowPanel: props.popupVisible,\n                format: timeFormat,\n                value: props.time || defaultTimeValue,\n                onChange: props.onTimePickerChange,\n                disableTime: disableTimeOptions,\n                ...props.timePickerProps,\n              }}\n            />\n          </div>\n        )}\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","mode","String","format","enableTimePicker","Boolean","timePickerProps","type","Object","default","year","Number","month","tableData","Array","time","multiple","firstDayOfWeek","partial","popupVisible","onYearChange","Function","onMonthChange","onJumperClick","onCellMouseEnter","onCellClick","onCellMouseLeave","onTimePickerChange","value","Date","internalYear","disableTime","defaultTime","setup","COMPONENT_NAME","usePrefixClass","_getDefaultFormat","getDefaultFormat","timeFormat","disableTimeOptions","isFunction","startValue","isArray","endValue","parseToDateTime","defaultTimeValue","_createVNode","concat","TDateHeader","val","_props$onMonthChange","call","_props$onYearChange","_ref","_props$onJumperClick","trigger","TDateTable","date","_ref2","_props$onCellClick","e","_props$onCellMouseEnt","TTimePickerPanel","_objectSpread","key","isShowPanel","onChange"],"mappings":"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"}