{"version":3,"file":"index.js","sources":["../../../../components/cascader/hooks/index.ts"],"sourcesContent":["import { Ref, reactive, computed, toRefs, watch, nextTick } from 'vue';\nimport { isEqual, isString, isFunction } from 'lodash-es';\n\nimport TreeStore from '@tdesign/common-js/tree/tree-store';\nimport { useVModel, useDisabled, useDefaultValue } from '@tdesign/shared-hooks';\n\nimport {\n  getTreeValue,\n  getCascaderValue,\n  isEmptyValues,\n  isValueInvalid,\n  treeNodesEffect,\n  treeStoreExpendEffect,\n} from '../utils';\n\nimport {\n  TreeNode,\n  TreeNodeValue,\n  TdCascaderProps,\n  TreeNodeModel,\n  CascaderChangeSource,\n  CascaderValue,\n  TreeOptionData,\n} from '../types';\n\n// 全局状态\nexport const useContext = (\n  props: TdCascaderProps,\n  setInnerValue: TdCascaderProps['onChange'],\n  innerPopupVisible: Ref<TdCascaderProps['popupVisible']>,\n  setPopupVisible: TdCascaderProps['onPopupVisibleChange'],\n) => {\n  const statusContext = reactive({\n    treeStore: null,\n    inputVal: null,\n    scopeVal: undefined,\n    treeNodes: [],\n    expend: [],\n  });\n\n  // 部分模式下需要允许父节点被搜索选择 valueMode = 'parentFirst' 和 checkStrictly\n  const isParentFilterable = computed(\n    () => (props.valueMode === 'parentFirst' || props.checkStrictly) && statusContext.inputVal,\n  );\n\n  return {\n    statusContext,\n    cascaderContext: computed(() => {\n      const {\n        size,\n        checkStrictly,\n        lazy,\n        multiple,\n        filterable,\n        clearable,\n        checkProps,\n        max,\n        disabled,\n        showAllLevels,\n        minCollapsedNum,\n        valueType,\n        modelValue,\n        valueMode,\n        reserveKeyword,\n      } = props;\n      return {\n        value: statusContext.scopeVal,\n        size,\n        checkStrictly,\n        lazy,\n        multiple,\n        filterable,\n        clearable,\n        checkProps,\n        max,\n        disabled,\n        showAllLevels,\n        minCollapsedNum,\n        valueType,\n        valueMode,\n        reserveKeyword,\n        visible: innerPopupVisible.value,\n        isParentFilterable: isParentFilterable.value,\n        ...statusContext,\n        setTreeNodes: (nodes: TreeNode[]) => {\n          statusContext.treeNodes = nodes;\n        },\n        setValue: (val: CascaderValue, source: CascaderChangeSource, node?: TreeNodeModel) => {\n          if (isEqual(val, modelValue)) return;\n          setInnerValue(val, { source, node });\n        },\n        setVisible: setPopupVisible,\n        setInputVal: (val: string) => {\n          statusContext.inputVal = val;\n        },\n        setExpand: (val: TreeNodeValue[]) => {\n          statusContext.expend = val;\n        },\n      };\n    }),\n  };\n};\n\n// 内聚组件核心的副作用与状态处理\nexport const useCascaderContext = (props: TdCascaderProps) => {\n  const disabled = useDisabled();\n  const { value, modelValue, popupVisible } = toRefs(props);\n  const [innerValue, setInnerValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n  const [innerPopupVisible, setPopupVisible] = useDefaultValue(\n    popupVisible,\n    false,\n    props.onPopupVisibleChange,\n    'popupVisible',\n  );\n  const { cascaderContext, statusContext } = useContext(props, setInnerValue, innerPopupVisible, setPopupVisible);\n\n  const isFilterable = computed(() => {\n    return Boolean(props.filterable || isFunction(props.filter));\n  });\n\n  // 更新treeNodes\n  const updatedTreeNodes = () => {\n    const { inputVal, treeStore, setTreeNodes, isParentFilterable } = cascaderContext.value;\n    treeNodesEffect(inputVal, treeStore, setTreeNodes, props.filter, isParentFilterable);\n  };\n\n  // 更新节点展开状态\n  const updateExpand = () => {\n    const { value, treeStore } = cascaderContext.value;\n    const { expend } = statusContext;\n    treeStoreExpendEffect(treeStore, value, expend);\n    treeStore.replaceChecked(getTreeValue(value));\n  };\n\n  watch(\n    () => props.options,\n    () => {\n      const { options, keys = {}, checkStrictly, lazy, load, valueMode } = props;\n      const { treeStore } = statusContext;\n\n      if (!options.length && !treeStore) return;\n\n      if (!treeStore) {\n        const store = new TreeStore({\n          keys: {\n            ...keys,\n            children: isString(keys.children) ? keys.children : 'children',\n          },\n          checkable: true,\n          expandMutex: true,\n          expandParent: true,\n          lazy,\n          load,\n          valueMode,\n          checkStrictly,\n          onLoad: () => {\n            nextTick(() => {\n              store.refreshNodes();\n              updatedTreeNodes();\n            });\n          },\n        });\n        store.append(options);\n        statusContext.treeStore = store;\n      } else {\n        treeStore.reload(options);\n        treeStore.refreshNodes();\n      }\n      updateExpand();\n      updatedTreeNodes();\n    },\n    { immediate: true, deep: true },\n  );\n\n  // tree插件配置变化\n  watch(\n    () => {\n      const { checkStrictly, lazy, load, valueMode } = props;\n      return JSON.stringify({\n        valueMode,\n        checkStrictly,\n        lazy,\n        load,\n      });\n    },\n    () => {\n      const { treeStore } = statusContext;\n      if (!treeStore) return;\n      const { checkStrictly, lazy, load, valueMode } = props;\n      const treeProps = {\n        checkStrictly,\n        disabled,\n        load,\n        lazy,\n        valueMode,\n      };\n      treeStore.setConfig(treeProps);\n    },\n    { immediate: true },\n  );\n\n  watch(\n    innerValue,\n    () => {\n      // 初始化判断 value 逻辑\n      const { setValue, multiple, valueType } = cascaderContext.value;\n\n      if (isValueInvalid(innerValue.value, cascaderContext.value)) {\n        setValue(multiple ? [] : '', 'invalid-value');\n      }\n\n      if (!isEmptyValues(innerValue.value)) {\n        statusContext.scopeVal = getCascaderValue(innerValue.value, valueType, multiple);\n      } else {\n        statusContext.scopeVal = multiple ? [] : '';\n      }\n\n      if (!statusContext.treeStore) return;\n      updateExpand();\n      updatedTreeNodes();\n    },\n    { immediate: true },\n  );\n\n  watch(\n    () => innerPopupVisible.value && isFilterable.value,\n    (visible) => {\n      const { setInputVal } = cascaderContext.value;\n      if (visible) {\n        setInputVal('');\n      }\n    },\n  );\n\n  watch(\n    () => statusContext.inputVal,\n    () => {\n      updatedTreeNodes();\n    },\n  );\n\n  const getCascaderItems = (arrValue: CascaderValue[]) => {\n    const options: TreeOptionData[] = [];\n    arrValue.forEach((value) => {\n      const nodes = statusContext.treeStore?.getNodes(value);\n      nodes && nodes[0] && options.push(nodes[0].data);\n    });\n    return options;\n  };\n\n  return {\n    cascaderContext,\n    isFilterable,\n    innerValue,\n    getCascaderItems,\n  };\n};\n"],"names":["useContext","props","setInnerValue","innerPopupVisible","setPopupVisible","statusContext","reactive","treeStore","inputVal","scopeVal","treeNodes","expend","isParentFilterable","computed","valueMode","checkStrictly","cascaderContext","size","lazy","multiple","filterable","clearable","checkProps","max","disabled","showAllLevels","minCollapsedNum","valueType","modelValue","reserveKeyword","_objectSpread","value","visible","setTreeNodes","nodes","setValue","val","source","node","isEqual","setVisible","setInputVal","setExpand","useCascaderContext","useDisabled","_toRefs","toRefs","popupVisible","_useVModel","useVModel","defaultValue","onChange","_useVModel2","_slicedToArray","innerValue","_useDefaultValue","useDefaultValue","onPopupVisibleChange","_useDefaultValue2","_useContext","isFilterable","Boolean","isFunction","filter","updatedTreeNodes","_cascaderContext$valu","treeNodesEffect","updateExpand","_cascaderContext$valu2","treeStoreExpendEffect","replaceChecked","getTreeValue","watch","options","keys","_props$keys","load","length","store","TreeStore","children","isString","checkable","expandMutex","expandParent","onLoad","nextTick","refreshNodes","append","reload","immediate","deep","JSON","stringify","treeProps","setConfig","_cascaderContext$valu3","isValueInvalid","isEmptyValues","getCascaderValue","getCascaderItems","arrValue","forEach","_statusContext$treeSt","getNodes","push","data"],"mappings":"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"}