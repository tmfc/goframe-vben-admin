/**
 * tdesign v1.17.3
 * (c) 2025 tdesign
 * @license MIT
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var Vue = require('vue');
var _objectWithoutProperties = require('@babel/runtime/helpers/objectWithoutProperties');
var _slicedToArray = require('@babel/runtime/helpers/slicedToArray');
var tdesignIconsVueNext = require('tdesign-icons-vue-next');
require('@babel/runtime/helpers/toConsumableArray');
require('@babel/runtime/helpers/typeof');
require('../_chunks/dep-3c17082b.js');
var index = require('../_chunks/dep-e0d767af.js');
var index$3 = require('../_chunks/dep-f36ac85d.js');
var index$2 = require('../_chunks/dep-b914353a.js');
var index$4 = require('../_chunks/dep-c0b34a05.js');
require('../_chunks/dep-62c55445.js');
var index$1 = require('../_chunks/dep-e3ec6bc0.js');
require('@babel/runtime/helpers/defineProperty');
var inputNumber_index = require('../input-number/index.js');
var select_index = require('../select/index.js');
var inputAdornment_index = require('../input-adornment/index.js');
var pagination_props = require('./props.js');
var pagination_hooks_useMoreAction = require('./hooks/useMoreAction.js');
var pagination_hooks_usePaginationClasses = require('./hooks/usePaginationClasses.js');
var isObject = require('../_chunks/dep-b172ffb0.js');
var isNumber = require('../_chunks/dep-6c08ebb5.js');
var configProvider_hooks_useConfig = require('../config-provider/hooks/useConfig.js');
require('../_chunks/dep-81f89596.js');
require('../_chunks/dep-e9e443b3.js');
require('../_chunks/dep-97cde52e.js');
require('../_chunks/dep-42470626.js');
require('../_chunks/dep-3857e28e.js');
require('../_chunks/dep-11c0611a.js');
require('../_chunks/dep-56be0189.js');
require('../_chunks/dep-bfcf2d69.js');
require('../_chunks/dep-d0a18b94.js');
require('../_chunks/dep-b970235a.js');
require('../_chunks/dep-cda66fb3.js');
require('../_chunks/dep-4ba9517c.js');
require('../_chunks/dep-d3130f90.js');
require('../_chunks/dep-53514171.js');
require('../_chunks/dep-a0ce0259.js');
require('../_chunks/dep-35a0e660.js');
require('../_chunks/dep-bb254cec.js');
require('dayjs');
require('../_chunks/dep-dc91d44a.js');
require('../_chunks/dep-d5216d3b.js');
require('../_chunks/dep-f7736f6a.js');
require('../_chunks/dep-dee5853a.js');
require('../_chunks/dep-676e174d.js');
require('../_chunks/dep-fac560bb.js');
require('../_chunks/dep-0ac6ae68.js');
require('../_chunks/dep-d72e09dd.js');
require('../_chunks/dep-2a644c59.js');
require('../_chunks/dep-09350c0c.js');
require('../_chunks/dep-9f738d44.js');
require('@babel/runtime/helpers/createClass');
require('@babel/runtime/helpers/classCallCheck');
require('../input-number/input-number.js');
require('../button/index.js');
require('../button/button.js');
require('../loading/index.js');
require('../_chunks/dep-a03f99f0.js');
require('../loading/plugin.js');
require('../_chunks/dep-fa858b52.js');
require('../loading/icon/gradient.js');
require('../_chunks/dep-6080cc7c.js');
require('../_chunks/dep-6d2dff6a.js');
require('../_chunks/dep-4a3aa884.js');
require('../_chunks/dep-e62aa80a.js');
require('../_chunks/dep-4b3d4086.js');
require('../loading/props.js');
require('../_chunks/dep-73b8ee37.js');
require('../_chunks/dep-b8a33a6b.js');
require('../_chunks/dep-abd1e140.js');
require('../_chunks/dep-f13b9823.js');
require('../_chunks/dep-7f429c3c.js');
require('../_chunks/dep-bdb30c10.js');
require('../_chunks/dep-0766d71c.js');
require('../_chunks/dep-6493b25c.js');
require('../_chunks/dep-6a7fa692.js');
require('../_chunks/dep-f5fd81dc.js');
require('../_chunks/dep-bdede950.js');
require('../_chunks/dep-b9205c6b.js');
require('../_chunks/dep-6e45c2ab.js');
require('../_chunks/dep-e6017cc5.js');
require('../button/props.js');
require('../_chunks/dep-f572b8fd.js');
require('../_chunks/dep-e1cde54e.js');
require('../_chunks/dep-8e410bd8.js');
require('../input/index.js');
require('../input/input.js');
require('../input/props.js');
require('../_chunks/dep-490c9f6b.js');
require('../input/hooks/useInput.js');
require('../form/consts/index.js');
require('../input/hooks/useLengthLimit.js');
require('../_chunks/dep-0e38324c.js');
require('../input/hooks/useInputEventHandler.js');
require('../input/hooks/useInputWidth.js');
require('../_chunks/dep-bc0bad3f.js');
require('../input/input-group.js');
require('../input/input-group-props.js');
require('../input-number/props.js');
require('../input-number/hooks/useInputNumber.js');
require('../_chunks/dep-56548994.js');
require('../_chunks/dep-b9baa76e.js');
require('../select/select.js');
require('@babel/runtime/helpers/asyncToGenerator');
require('@babel/runtime/regenerator');
require('../common-components/fake-arrow.js');
require('../select-input/index.js');
require('../select-input/select-input.js');
require('../popup/index.js');
require('../popup/popup.js');
require('@popperjs/core');
require('../popup/container.js');
require('../popup/props.js');
require('../_chunks/dep-cedcef50.js');
require('../_chunks/dep-b237d743.js');
require('../_chunks/dep-9927af91.js');
require('../_chunks/dep-960712c7.js');
require('../select-input/props.js');
require('../select-input/hooks/useMultiple.js');
require('../tag-input/index.js');
require('../tag-input/tag-input.js');
require('../tag-input/props.js');
require('../tag-input/hooks/useDragSorter.js');
require('../tag-input/hooks/useHover.js');
require('../tag-input/hooks/useTagScroll.js');
require('../tag-input/hooks/useTagList.js');
require('../tag/index.js');
require('../tag/tag.js');
require('tinycolor2');
require('../tag/props.js');
require('../tag/check-tag.js');
require('../tag/check-tag-props.js');
require('../_chunks/dep-679830b0.js');
require('../tag/check-tag-group.js');
require('../tag/check-tag-group-props.js');
require('../select-input/hooks/useOverlayInnerStyle.js');
require('../select-input/hooks/useSingle.js');
require('../_chunks/dep-d86e814d.js');
require('../_chunks/dep-5026a2be.js');
require('../_chunks/dep-47b09eba.js');
require('../select/components/select-panel.js');
require('../select/option.js');
require('../select/option-props.js');
require('../checkbox/index.js');
require('../checkbox/checkbox.js');
require('../checkbox/props.js');
require('../checkbox/consts/index.js');
require('../checkbox/hooks/useCheckboxLazyLoad.js');
require('../_chunks/dep-cbefdeb1.js');
require('../checkbox/hooks/useKeyboardEvent.js');
require('../checkbox/group.js');
require('../checkbox/checkbox-group-props.js');
require('../_chunks/dep-a57b35a8.js');
require('../_chunks/dep-818d4d83.js');
require('../_chunks/dep-636d3f02.js');
require('../select/utils/index.js');
require('../select/consts/index.js');
require('../select/option-group.js');
require('../select/option-group-props.js');
require('../select/props.js');
require('../select/hooks/usePanelVirtualScroll.js');
require('../_chunks/dep-b750b13e.js');
require('../_chunks/dep-061dfad4.js');
require('../select/hooks/useKeyboardControl.js');
require('../select/hooks/useSelectOptions.js');
require('../_chunks/dep-6c6f0107.js');
require('../input-adornment/input-adornment.js');
require('../input-adornment/props.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var _objectWithoutProperties__default = /*#__PURE__*/_interopDefaultLegacy(_objectWithoutProperties);
var _slicedToArray__default = /*#__PURE__*/_interopDefaultLegacy(_slicedToArray);

/**
 * Checks if `value` is `NaN`.
 *
 * **Note:** This method is based on
 * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as
 * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for
 * `undefined` and other non-number values.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
 * @example
 *
 * _.isNaN(NaN);
 * // => true
 *
 * _.isNaN(new Number(NaN));
 * // => true
 *
 * isNaN(undefined);
 * // => true
 *
 * _.isNaN(undefined);
 * // => false
 */
function isNaN(value) {
  // An `NaN` primitive is the only value that is not equal to itself.
  // Perform the `toStringTag` check first to avoid errors with some
  // ActiveX objects in IE.
  return isNumber.isNumber(value) && value != +value;
}

var _excluded = ["pageCount"];
var min = 1;
var _Pagination = Vue.defineComponent({
  name: "TPagination",
  props: pagination_props["default"],
  setup: function setup(props2) {
    var _getCurrentInstance = Vue.getCurrentInstance(),
      emit = _getCurrentInstance.emit;
    var _toRefs = Vue.toRefs(props2),
      modelValue = _toRefs.modelValue,
      pageSize = _toRefs.pageSize,
      current = _toRefs.current;
    var renderTNodeJSX = index.useTNodeJSX();
    var _useVModel = index$1.useVModel(current, modelValue, props2.defaultCurrent, props2.onCurrentChange, "current"),
      _useVModel2 = _slicedToArray__default["default"](_useVModel, 2),
      innerCurrent = _useVModel2[0],
      setInnerCurrent = _useVModel2[1];
    var _useDefaultValue = index$2.useDefaultValue(pageSize, props2.defaultPageSize, props2.onPageSizeChange, "pageSize"),
      _useDefaultValue2 = _slicedToArray__default["default"](_useDefaultValue, 2),
      innerPageSize = _useDefaultValue2[0],
      setInnerPageSize = _useDefaultValue2[1];
    var _useConfig = configProvider_hooks_useConfig.useConfig("pagination"),
      t = _useConfig.t,
      globalConfig = _useConfig.globalConfig;
    var COMPONENT_NAME = index$3.usePrefixClass("pagination");
    var _useGlobalIcon = index$4.useGlobalIcon({
        PageFirstIcon: tdesignIconsVueNext.PageFirstIcon,
        PageLastIcon: tdesignIconsVueNext.PageLastIcon,
        ChevronLeftIcon: tdesignIconsVueNext.ChevronLeftIcon,
        ChevronRightIcon: tdesignIconsVueNext.ChevronRightIcon,
        ChevronLeftDoubleIcon: tdesignIconsVueNext.ChevronLeftDoubleIcon,
        ChevronRightDoubleIcon: tdesignIconsVueNext.ChevronRightDoubleIcon,
        EllipsisIcon: tdesignIconsVueNext.EllipsisIcon
      }),
      PageFirstIcon = _useGlobalIcon.PageFirstIcon,
      PageLastIcon = _useGlobalIcon.PageLastIcon,
      ChevronLeftIcon = _useGlobalIcon.ChevronLeftIcon,
      ChevronRightIcon = _useGlobalIcon.ChevronRightIcon,
      ChevronLeftDoubleIcon = _useGlobalIcon.ChevronLeftDoubleIcon,
      ChevronRightDoubleIcon = _useGlobalIcon.ChevronRightDoubleIcon,
      EllipsisIcon = _useGlobalIcon.EllipsisIcon;
    var _usePaginationClasses = pagination_hooks_usePaginationClasses.usePaginationClasses(props2, innerCurrent, innerPageSize, COMPONENT_NAME),
      pageCount = _usePaginationClasses.pageCount,
      CLASS_MAP = _objectWithoutProperties__default["default"](_usePaginationClasses, _excluded);
    var _useMoreAction = pagination_hooks_useMoreAction.useMoreAction(props2, pageCount, innerCurrent),
      prevMore = _useMoreAction.prevMore,
      isPrevMoreShow = _useMoreAction.isPrevMoreShow,
      curPageLeftCount = _useMoreAction.curPageLeftCount,
      nextMore = _useMoreAction.nextMore,
      isNextMoreShow = _useMoreAction.isNextMoreShow,
      curPageRightCount = _useMoreAction.curPageRightCount;
    var jumpIndex = Vue.ref(innerCurrent.value);
    var isFolded = Vue.computed(function () {
      return pageCount.value > props2.maxPageBtn;
    });
    var sizeOptions = Vue.computed(function () {
      var pageSizeOptions = props2.pageSizeOptions;
      var options = pageSizeOptions.map(function (option) {
        return isObject.isObject(option) ? option : {
          label: t(globalConfig.value.itemsPerPage, {
            size: option
          }),
          value: Number(option)
        };
      });
      return options.sort(function (a, b) {
        return a.value - b.value;
      });
    });
    var isMidEllipsis = Vue.computed(function () {
      return props2.pageEllipsisMode === "mid";
    });
    var pages = Vue.computed(function () {
      var array = [];
      var start;
      var end;
      if (isFolded.value) {
        if (isPrevMoreShow.value && isNextMoreShow.value) {
          start = innerCurrent.value - curPageLeftCount.value;
          end = innerCurrent.value + curPageRightCount.value;
        } else {
          var foldedStart = isMidEllipsis.value ? 2 : 1;
          var foldedEnd = isMidEllipsis.value ? pageCount.value - 1 : pageCount.value;
          if (isPrevMoreShow.value) {
            start = Math.min(innerCurrent.value - 1, pageCount.value - props2.foldedMaxPageBtn + 1);
          } else {
            start = foldedStart;
          }
          if (isNextMoreShow.value) {
            end = Math.max(innerCurrent.value + 1, props2.foldedMaxPageBtn);
          } else {
            end = foldedEnd;
          }
        }
      } else {
        start = 1;
        end = pageCount.value;
      }
      for (var i = start; i <= end; i++) {
        array.push(i);
      }
      return array;
    });
    Vue.watch(function () {
      return innerCurrent.value;
    }, function (val) {
      return jumpIndex.value = val;
    });
    var toPage = function toPage(pageIndex, pageInfo) {
      if (props2.disabled) {
        return;
      }
      var current2 = pageIndex;
      if (pageIndex < min) {
        current2 = min;
      } else if (pageIndex > pageCount.value) {
        current2 = pageCount.value;
      }
      if (innerCurrent.value !== current2) {
        var prev = innerCurrent.value;
        pageInfo = pageInfo || {
          current: current2,
          previous: prev,
          pageSize: innerPageSize.value
        };
        if (pageInfo) {
          var _props2$onChange;
          setInnerCurrent(current2, pageInfo);
          (_props2$onChange = props2.onChange) === null || _props2$onChange === void 0 || _props2$onChange.call(props2, pageInfo);
        } else {
          emit("update:modelValue", current2);
        }
      }
    };
    var handlePageChange = function handlePageChange(type) {
      var pageChangeMap = {
        prevPage: function prevPage() {
          return toPage(innerCurrent.value - 1);
        },
        nextPage: function nextPage() {
          return toPage(innerCurrent.value + 1);
        },
        prevMorePage: function prevMorePage() {
          return toPage(Math.max(2, innerCurrent.value - props2.foldedMaxPageBtn));
        },
        nextMorePage: function nextMorePage() {
          return toPage(Math.min(innerCurrent.value + props2.foldedMaxPageBtn, pageCount.value - 1));
        }
      };
      pageChangeMap[type]();
    };
    var onSelectorChange = function onSelectorChange(val) {
      if (props2.disabled) return;
      var pageSize2 = Number(val);
      var newPageCount = pageSize2 > 0 ? Math.max(Math.ceil(props2.total / pageSize2), 1) : 1;
      var indexExceeds = innerCurrent.value > newPageCount;
      var userControlled = current.value != null && current.value < newPageCount;
      var initialPageInfo = {
        current: indexExceeds ? newPageCount : innerCurrent.value,
        previous: innerCurrent.value,
        pageSize: pageSize2
      };
      setInnerPageSize(pageSize2, initialPageInfo);
      Vue.nextTick(function () {
        if (indexExceeds) {
          var pageCurrent = userControlled ? newPageCount : innerCurrent.value;
          var pageInfo = {
            current: pageCurrent,
            previous: initialPageInfo.current,
            pageSize: pageSize2
          };
          toPage(pageCurrent, pageInfo);
        } else {
          var _props2$onChange2;
          var _pageInfo = {
            current: innerCurrent.value,
            previous: initialPageInfo.current,
            pageSize: pageSize2
          };
          if (innerCurrent.value !== _pageInfo.previous) {
            emit("currentChange", innerCurrent.value, _pageInfo);
          }
          (_props2$onChange2 = props2.onChange) === null || _props2$onChange2 === void 0 || _props2$onChange2.call(props2, _pageInfo);
        }
      });
    };
    var onJumperChange = function onJumperChange(val) {
      var currentIndex = Math.trunc(+val);
      if (isNaN(currentIndex)) return;
      jumpIndex.value = currentIndex;
      toPage(currentIndex);
    };
    return function () {
      var total = props2.total,
        pageSizeOptions = props2.pageSizeOptions,
        size = props2.size,
        disabled = props2.disabled,
        showPageSize = props2.showPageSize;
      if (pageCount.value < 1) return null;
      var Jumper = Vue.createVNode("div", {
        "class": CLASS_MAP.jumperClass.value
      }, [t(globalConfig.value.jumpTo), Vue.createVNode(inputAdornment_index.InputAdornment, {
        "append": "/ ".concat(pageCount.value, " ").concat(t(globalConfig.value.page))
      }, {
        "default": function _default() {
          return [Vue.createVNode(inputNumber_index.InputNumber, {
            "class": CLASS_MAP.jumperInputClass.value,
            "modelValue": jumpIndex.value,
            "onUpdate:modelValue": function onUpdateModelValue($event) {
              return jumpIndex.value = $event;
            },
            "onBlur": onJumperChange,
            "onEnter": onJumperChange,
            "max": pageCount.value,
            "min": min,
            "size": size,
            "disabled": disabled,
            "theme": "normal",
            "placeholder": ""
          }, null)];
        }
      })]);
      return Vue.createVNode("div", {
        "class": CLASS_MAP.paginationClass.value
      }, [renderTNodeJSX("totalContent", Vue.createVNode("div", {
        "class": CLASS_MAP.totalClass.value
      }, [t(globalConfig.value.total, total)])), showPageSize && pageSizeOptions.length > 0 && Vue.createVNode(select_index.Select, Vue.mergeProps({
        "size": size,
        "value": innerPageSize,
        "disabled": disabled,
        "class": CLASS_MAP.sizerClass.value,
        "autoWidth": true,
        "onChange": onSelectorChange,
        "options": sizeOptions.value
      }, props2.selectProps), null), props2.showFirstAndLastPageBtn ? Vue.createVNode("div", {
        "class": CLASS_MAP.preBtnClass.value,
        "onClick": function onClick() {
          return toPage(1);
        }
      }, [Vue.createVNode(PageFirstIcon, null, null)]) : null, props2.showPreviousAndNextBtn ? Vue.createVNode("div", {
        "class": CLASS_MAP.preBtnClass.value,
        "onClick": function onClick() {
          return handlePageChange("prevPage");
        }
      }, [Vue.createVNode(ChevronLeftIcon, null, null)]) : null, props2.showPageNumber && props2.theme === "default" ? Vue.createVNode("ul", {
        "class": CLASS_MAP.btnWrapClass.value
      }, [isFolded.value && isMidEllipsis.value && Vue.createVNode("li", {
        "class": CLASS_MAP.getButtonClass(1),
        "onClick": function onClick() {
          return toPage(min);
        }
      }, [min]), isFolded.value && isPrevMoreShow.value && isMidEllipsis.value ? Vue.createVNode("li", {
        "class": CLASS_MAP.btnMoreClass.value,
        "onClick": function onClick() {
          return handlePageChange("prevMorePage");
        },
        "onMouseover": function onMouseover() {
          return prevMore.value = true;
        },
        "onMouseout": function onMouseout() {
          return prevMore.value = false;
        }
      }, [prevMore.value ? Vue.createVNode(ChevronLeftDoubleIcon, null, null) : Vue.createVNode(EllipsisIcon, null, null)]) : null, pages.value.map(function (i) {
        return Vue.createVNode("li", {
          "class": CLASS_MAP.getButtonClass(i),
          "key": i,
          "onClick": function onClick() {
            return toPage(i);
          }
        }, [i]);
      }), isFolded.value && isNextMoreShow.value && isMidEllipsis.value ? Vue.createVNode("li", {
        "class": CLASS_MAP.btnMoreClass.value,
        "onClick": function onClick() {
          return handlePageChange("nextMorePage");
        },
        "onMouseover": function onMouseover() {
          return nextMore.value = true;
        },
        "onMouseout": function onMouseout() {
          return nextMore.value = false;
        }
      }, [nextMore.value ? Vue.createVNode(ChevronRightDoubleIcon, null, null) : Vue.createVNode(EllipsisIcon, null, null)]) : null, isFolded.value && isMidEllipsis.value ? Vue.createVNode("li", {
        "class": CLASS_MAP.getButtonClass(pageCount.value),
        "onClick": function onClick() {
          return toPage(pageCount.value);
        }
      }, [pageCount.value]) : null]) : null, props2.theme === "simple" && Jumper, props2.showPreviousAndNextBtn ? Vue.createVNode("div", {
        "class": CLASS_MAP.nextBtnClass.value,
        "onClick": function onClick() {
          return handlePageChange("nextPage");
        }
      }, [Vue.createVNode(ChevronRightIcon, null, null)]) : null, props2.showFirstAndLastPageBtn ? Vue.createVNode("div", {
        "class": CLASS_MAP.nextBtnClass.value,
        "onClick": function onClick() {
          return toPage(pageCount.value);
        }
      }, [Vue.createVNode(PageLastIcon, null, null)]) : null, props2.theme === "default" && props2.showJumper && Jumper]);
    };
  }
});

exports["default"] = _Pagination;
//# sourceMappingURL=pagination.js.map
