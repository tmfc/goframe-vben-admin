{"version":3,"file":"notification.js","sources":["../../../components/notification/notification.tsx"],"sourcesContent":["import { defineComponent, h, onBeforeMount, onMounted, ref } from 'vue';\nimport {\n  InfoCircleFilledIcon as TdInfoCircleFilledIcon,\n  CheckCircleFilledIcon as TdCheckCircleFilledIcon,\n  CloseIcon as TdCloseIcon,\n} from 'tdesign-icons-vue-next';\nimport { isFunction } from 'lodash-es';\n\nimport { useConfig, useContent, useTNodeJSX, useGlobalIcon, usePrefixClass } from '@tdesign/shared-hooks';\nimport props from './props';\n\nimport { fadeIn, fadeOut } from './utils';\n\nexport default defineComponent({\n  name: 'TNotification',\n  props: {\n    ...props,\n    placement: String, // just for animation\n  },\n  setup(props, { slots, expose }) {\n    const COMPONENT_NAME = usePrefixClass('notification');\n    const { classPrefix } = useConfig('classPrefix');\n    const { InfoCircleFilledIcon, CheckCircleFilledIcon, CloseIcon } = useGlobalIcon({\n      InfoCircleFilledIcon: TdInfoCircleFilledIcon,\n      CheckCircleFilledIcon: TdCheckCircleFilledIcon,\n      CloseIcon: TdCloseIcon,\n    });\n    const renderTNode = useTNodeJSX();\n    const renderContent = useContent();\n    const timer = ref(null);\n    const notificationRef = ref(null);\n\n    const handleCloseBtnClick = (e?: MouseEvent) => {\n      const dom = notificationRef.value as HTMLElement;\n      fadeOut(dom, props.placement, () => {\n        props.onCloseBtnClick?.({ e });\n      });\n    };\n\n    const close = () => {\n      const dom = notificationRef.value as HTMLElement;\n      fadeOut(dom, props.placement, () => {\n        props.onClose?.();\n      });\n    };\n\n    const renderIcon = () => {\n      let iconContent;\n      if (props.icon === false) return null;\n      if (isFunction(props.icon)) {\n        iconContent = props.icon(h);\n      } else if (slots.icon) {\n        iconContent = slots.icon(null);\n      } else if (props.theme) {\n        const iconType =\n          props.theme === 'success' ? (\n            <CheckCircleFilledIcon class={`${classPrefix.value}-is-${props.theme}`} />\n          ) : (\n            <InfoCircleFilledIcon class={`${classPrefix.value}-is-${props.theme}`} />\n          );\n        iconContent = <div class={`${classPrefix.value}-notification__icon`}>{iconType}</div>;\n      }\n      return iconContent;\n    };\n\n    const renderClose = () => {\n      const defaultClose = <CloseIcon />;\n      return (\n        <span class={`${classPrefix.value}-message__close`} onClick={handleCloseBtnClick}>\n          {renderTNode('closeBtn', defaultClose)}\n        </span>\n      );\n    };\n\n    const renderMainContent = () => {\n      return <div class={`${COMPONENT_NAME.value}__content`}>{renderContent('default', 'content')}</div>;\n    };\n\n    const clearTimer = () => {\n      props.duration && clearTimeout(timer.value);\n    };\n\n    const setTimer = () => {\n      if (!props.duration) {\n        return;\n      }\n      timer.value = Number(\n        setTimeout(() => {\n          clearTimer();\n          const dom = notificationRef.value as HTMLElement;\n          fadeOut(dom, props.placement, () => {\n            props.onDurationEnd?.();\n          });\n        }, props.duration),\n      );\n    };\n\n    onBeforeMount(() => {\n      props.duration && setTimer();\n    });\n\n    onMounted(() => {\n      const dom = notificationRef.value;\n      fadeIn(dom, props.placement);\n    });\n\n    expose({ close });\n    return () => (\n      <div ref={notificationRef} class={`${COMPONENT_NAME.value}`} onMouseenter={clearTimer} onMouseleave={setTimer}>\n        {renderIcon()}\n        <div class={`${COMPONENT_NAME.value}__main`}>\n          <div class={`${COMPONENT_NAME.value}__title__wrap`}>\n            <span class={`${COMPONENT_NAME.value}__title`}>{renderTNode('title')}</span>\n            {renderClose()}\n          </div>\n          {renderMainContent()}\n          {renderTNode('footer')}\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","_objectSpread","placement","String","setup","slots","_ref","expose","COMPONENT_NAME","usePrefixClass","_useConfig","useConfig","classPrefix","_useGlobalIcon","useGlobalIcon","InfoCircleFilledIcon","TdInfoCircleFilledIcon","CheckCircleFilledIcon","TdCheckCircleFilledIcon","CloseIcon","TdCloseIcon","renderTNode","useTNodeJSX","renderContent","useContent","timer","ref","notificationRef","handleCloseBtnClick","e","dom","value","fadeOut","_props2$onCloseBtnCli","onCloseBtnClick","close","_props2$onClose","onClose","renderIcon","iconContent","icon","isFunction","h","theme","iconType","_createVNode","concat","renderClose","defaultClose","renderMainContent","clearTimer","duration","clearTimeout","setTimer","Number","setTimeout","_props2$onDurationEnd","onDurationEnd","onBeforeMount","onMounted","fadeIn"],"mappings":"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"}