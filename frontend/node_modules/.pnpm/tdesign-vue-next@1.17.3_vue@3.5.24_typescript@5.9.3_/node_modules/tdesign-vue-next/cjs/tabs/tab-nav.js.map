{"version":3,"file":"tab-nav.js","sources":["../../../shared/hooks/useDragSort/index.ts","../../../common/js/tabs/base.ts","../../../components/tabs/tab-nav.tsx"],"sourcesContent":["import { onUnmounted } from 'vue';\n\nconst traversalTabNavs = (tabNavs: HTMLCollection, fn: (tabNav: HTMLDivElement) => void) => {\n  Array.from(tabNavs)\n    .filter((node): node is HTMLDivElement => node instanceof HTMLDivElement && !!node.getAttribute('draggable'))\n    .forEach(fn);\n};\n\nconst handleTarget = (target: EventTarget, tabNavs: HTMLCollection): HTMLDivElement | undefined => {\n  let resultTarget: HTMLDivElement | undefined;\n\n  traversalTabNavs(tabNavs, (itemNode) => {\n    if (target instanceof Node && itemNode.contains(target)) {\n      resultTarget = itemNode;\n    }\n  });\n\n  return resultTarget;\n};\n\nexport function useDragSort(props: any) {\n  let navsWrap: HTMLDivElement | null = null;\n\n  // 获取当前正在拖动的tabNav节点\n  let dragged: HTMLDivElement;\n  const enterTargets: HTMLDivElement[] = [];\n\n  const dragstart = (event: DragEvent) => {\n    const target = event.target as HTMLDivElement;\n    // const { target } = event;\n    // 保存拖动元素的引用(ref.)\n    dragged = target;\n    // 使其半透明\n    target.style.opacity = '0.5';\n\n    // 指定允许的拖拽操作为 move，且兼容 Firefox（需要 setData）\n    const dt = event.dataTransfer;\n    if (dt) {\n      dt.effectAllowed = 'copy';\n      try {\n        dt.setData('text/plain', '');\n      } catch (e) {\n        // 某些环境下可能抛错，忽略\n      }\n    }\n  };\n\n  const dragend = (event: DragEvent) => {\n    // 重置透明度\n    (event.target as HTMLDivElement).style.opacity = '';\n  };\n  /* 放置目标元素时触发事件 */\n  const dragover = (event: DragEvent) => {\n    if (!navsWrap) return;\n    const target = handleTarget(event.target, navsWrap.children);\n    const dt = event.dataTransfer;\n    if (dt) {\n      // 不可放置目标显示禁止状态\n      dt.dropEffect = target?.draggable ? 'copy' : 'none';\n    }\n    if (target?.draggable) {\n      // 阻止默认动作以启用drop\n      event.preventDefault();\n    }\n  };\n  // 当可拖动的元素进入可放置的目标时\n  const dragenter = (event: DragEvent) => {\n    // 高亮目标节点\n    const target = handleTarget(event.target, navsWrap.children);\n    if (target && target !== dragged && target.draggable) {\n      const { firstChild } = target;\n      if (firstChild instanceof HTMLElement) {\n        const newStyle = { outline: '1px dashed #0052d9' };\n        Object.assign(firstChild.style, newStyle);\n      }\n      // 进入的节点全部记录下来\n      if (!enterTargets.includes(target)) {\n        enterTargets.push(target);\n      }\n    }\n  };\n  // 当拖动元素离开可放置目标节点\n  const dragleave = (event: DragEvent) => {\n    const target = event.target as HTMLDivElement;\n    // 重置其边框\n    // const { target } = event;\n    for (const enterTarget of enterTargets) {\n      // 目标不在需要放入的节点内，则重置边框\n      if (!enterTarget.contains(target)) {\n        // 记录过的节点全部重置边框\n        (enterTarget.firstChild as HTMLDivElement).style.outline = 'none';\n      }\n    }\n  };\n  const drop = (event: DragEvent) => {\n    // 阻止默认动作（如打开一些元素的链接）\n    event.preventDefault();\n\n    traversalTabNavs(navsWrap.children, (tabNav) => {\n      const firstChild = tabNav.firstChild as HTMLElement;\n      if (firstChild) {\n        firstChild.style.outline = 'none';\n      }\n    });\n\n    // 将拖动的元素到所选择的放置目标节点中\n    let target = handleTarget(event.target, navsWrap.children);\n    if (target && target.parentNode !== dragged && target.draggable) {\n      // 获取拖拽元素index\n      const dragIndex = [].indexOf.call(navsWrap.children, dragged);\n      // 获取放入元素index\n      const targetIndex = [].indexOf.call(navsWrap.children, target);\n      if (targetIndex > dragIndex) {\n        target = navsWrap.children[targetIndex + 1] as HTMLDivElement | null;\n      }\n\n      // 当props.theme === \"normal\" 会多出一个指示条为第一个dom节点，所以需要减1\n      const currentIndex = props.theme === 'card' ? dragIndex : dragIndex - 1;\n      const endIndex = props.theme === 'card' ? targetIndex : targetIndex - 1;\n      props.onDragSort?.({\n        currentIndex,\n        current: props.panels[currentIndex].value,\n        targetIndex: endIndex,\n        target: props.panels[endIndex].value,\n      });\n    }\n  };\n  function setNavsWrap(val: HTMLDivElement) {\n    navsWrap = val;\n    navsWrap.addEventListener('dragstart', dragstart, false);\n    navsWrap.addEventListener('dragend', dragend, false);\n    navsWrap.addEventListener('dragover', dragover, false);\n    navsWrap.addEventListener('dragenter', dragenter, false);\n    document.addEventListener('dragleave', dragleave, false);\n    document.addEventListener('mousemove', dragleave, false);\n    navsWrap.addEventListener('drop', drop, false);\n  }\n\n  onUnmounted(() => {\n    if (navsWrap) {\n      navsWrap.removeEventListener('dragstart', dragstart);\n      navsWrap.removeEventListener('dragend', dragend);\n      navsWrap.removeEventListener('dragover', dragover);\n      navsWrap.removeEventListener('dragenter', dragenter);\n      document.removeEventListener('dragleave', dragleave);\n      document.removeEventListener('mousemove', dragleave);\n      navsWrap.removeEventListener('drop', drop);\n    }\n  });\n  return { setNavsWrap };\n}\n","const getDomWidth = (dom: HTMLElement): number => dom?.offsetWidth || 0;\nconst getDomOffsetLeft = (dom: HTMLElement): number => dom?.offsetLeft || 0;\n\ntype scrollPosition = 'auto' | 'start' | 'center' | 'end';\n\nexport interface allElementDeps {\n  activeTab?: HTMLElement;\n  navsContainer?: HTMLElement;\n  navsWrap?: HTMLElement;\n  leftOperations?: HTMLElement;\n  toLeftBtn?: HTMLElement;\n  rightOperations?: HTMLElement;\n  toRightBtn?: HTMLElement;\n}\n\nexport function calculateOffset(depElement: allElementDeps, offset: number, scrollPosition: scrollPosition): number {\n  // 计算当前 activeTab 应该滚动到的位置\n  const { navsContainer, activeTab, rightOperations, leftOperations } = depElement;\n  const tabWidth = getDomWidth(activeTab);\n  const wrapWidth = getDomWidth(navsContainer);\n  const tabOffset = getDomOffsetLeft(activeTab);\n  const rightOperationsWidth = getDomWidth(rightOperations);\n  const leftOperationsWidth = getDomWidth(leftOperations);\n\n  if (scrollPosition === 'auto') {\n    if (tabOffset - leftOperationsWidth < offset) {\n      return tabOffset - leftOperationsWidth;\n    } if (tabOffset + tabWidth > offset + wrapWidth - rightOperationsWidth) {\n      return tabOffset + tabWidth - wrapWidth + rightOperationsWidth;\n    }\n  } else if (scrollPosition === 'start') {\n    return tabOffset - leftOperationsWidth;\n  } else if (scrollPosition === 'center') {\n    return tabOffset + (tabWidth - wrapWidth) / 2;\n  } else if (scrollPosition === 'end') {\n    return tabOffset + tabWidth - wrapWidth + rightOperationsWidth;\n  }\n  return offset;\n}\n\n/**\n * 计算上一页或下一页偏移量\n * @param elements 计算时依赖的元素\n * @returns number\n */\nexport function calcPrevOrNextOffset(elements: allElementDeps, offset: number, action: 'next' | 'prev'): number {\n  const { navsContainer, activeTab } = elements;\n  const navsContainerWidth = getDomWidth(navsContainer);\n  const activeTabWidth = getDomWidth(activeTab);\n  /**\n   * 计算当前 activeTab 与 navsContainer 的宽度差，\n   * 注意 activeTab 的宽度可能大于 navsContainer 的宽度，\n   * 所以需要取绝对值\n   */\n  const diffWidth = Math.abs(navsContainerWidth - activeTabWidth);\n  if (action === 'next') {\n    return offset + diffWidth;\n  }\n  return offset - diffWidth;\n}\n\n/**\n * 计算最大偏移量\n * @param elements 计算时依赖的元素\n * @returns number\n */\nexport function calcMaxOffset(elements: allElementDeps): number {\n  const { navsWrap, navsContainer, rightOperations, toRightBtn } = elements;\n  const wrapWidth = getDomWidth(navsWrap);\n  const containerWidth = getDomWidth(navsContainer);\n  const rightOperationsWidth = getDomWidth(rightOperations);\n  const toRightBtnWidth = getDomWidth(toRightBtn);\n  return wrapWidth - containerWidth + rightOperationsWidth - toRightBtnWidth;\n}\n\n/**\n * 计算合法偏移量\n * @param offset 偏移值\n * @param maxOffset 最大偏移值\n * @returns number\n */\nexport function calcValidOffset(offset: number, maxOffset: number): number {\n  return Math.max(0, Math.min(offset, maxOffset));\n}\n","import { h, defineComponent, Transition, ref, computed, watch, onMounted, nextTick } from 'vue';\nimport { debounce, isFunction } from 'lodash-es';\nimport {\n  ChevronLeftIcon as TdChevronLeftIcon,\n  ChevronRightIcon as TdChevronRightIcon,\n  AddIcon as TdAddIcon,\n} from 'tdesign-icons-vue-next';\nimport { TdTabsProps } from './type';\nimport tabProps from './props';\nimport { calcMaxOffset, calcValidOffset, calculateOffset, calcPrevOrNextOffset } from '@tdesign/common-js/tabs/base';\n\n// 子组件\nimport TTabPanel from './tab-panel';\nimport TTabNavItem from './tab-nav-item';\nimport TTabNavBar from './tab-nav-bar';\n\n// hooks\nimport { useResize, useDragSort, useGlobalIcon, usePrefixClass, useCommonClassName } from '@tdesign/shared-hooks';\n\nexport default defineComponent({\n  name: 'TTabNav',\n  resizeObserver: null,\n  props: {\n    theme: tabProps.theme,\n    panels: {\n      type: Array as { new (): Array<InstanceType<typeof TTabPanel>> },\n      default: (): Array<InstanceType<typeof TTabPanel>> => [] as Array<InstanceType<typeof TTabPanel>>,\n    },\n    action: Array,\n    value: tabProps.value,\n    placement: tabProps.placement,\n    scrollPosition: tabProps.scrollPosition,\n    size: tabProps.size,\n    disabled: tabProps.disabled,\n    addable: tabProps.addable,\n    onChange: tabProps.onChange,\n    onAdd: tabProps.onAdd,\n    onRemove: tabProps.onRemove,\n    dragSort: tabProps.dragSort,\n    // 在 useDragSort 里会被调用\n    onDragSort: tabProps.onDragSort,\n  },\n  setup(props) {\n    const componentName = usePrefixClass('tabs');\n    const { ChevronLeftIcon, ChevronRightIcon, AddIcon } = useGlobalIcon({\n      ChevronLeftIcon: TdChevronLeftIcon,\n      ChevronRightIcon: TdChevronRightIcon,\n      AddIcon: TdAddIcon,\n    });\n    const classPrefix = usePrefixClass();\n\n    const { SIZE } = useCommonClassName();\n\n    const scrollLeft = ref(0);\n\n    // refs\n    const navsContainerRef = ref();\n    const navsWrapRef = ref();\n    const leftOperationsRef = ref();\n    const rightOperationsRef = ref();\n    const toRightBtnRef = ref();\n    const activeTabRef = ref();\n    const maxScrollLeft = ref(0);\n    const showAction = computed(() => {\n      return ['top', 'bottom'].includes(props?.placement?.toLowerCase());\n    });\n\n    const getRefs = () => ({\n      navsContainer: navsContainerRef.value,\n      navsWrap: navsWrapRef.value,\n      leftOperations: leftOperationsRef.value,\n      rightOperations: rightOperationsRef.value,\n      toRightBtn: toRightBtnRef.value,\n      activeTab: activeTabRef.value,\n    });\n\n    // left right位置 选项卡的位置是在左右侧垂直方向铺开的\n    const isVerticalPlacement = computed(() => ['left', 'right'].includes(props.placement.toLowerCase()));\n\n    // 展示操作按钮\n    const canToLeft = computed(() => scrollLeft.value > 1);\n    const canToRight = computed(() => scrollLeft.value < maxScrollLeft.value - 1);\n\n    // style\n    const wrapTransformStyle = computed(() => {\n      if (isVerticalPlacement.value) return {};\n      return {\n        transform: `translate3d(${-scrollLeft.value}px, 0, 0)`,\n      };\n    });\n    const navsContainerStyle = computed(() => {\n      return props.addable ? { 'min-height': '48px' } : null;\n    });\n\n    // class\n    const iconBaseClass = computed(() => {\n      return {\n        [`${componentName.value}__btn`]: true,\n        [SIZE.value.medium]: props.size === 'medium',\n        [SIZE.value.large]: props.size === 'large',\n      };\n    });\n    const leftIconClass = computed(() => {\n      return {\n        [`${componentName.value}__btn--left`]: true,\n        ...iconBaseClass.value,\n      };\n    });\n    const rightIconClass = computed(() => {\n      return {\n        [`${componentName.value}__btn--right`]: true,\n        ...iconBaseClass.value,\n      };\n    });\n    const addIconClass = computed(() => {\n      return {\n        [`${componentName.value}__add-btn`]: true,\n        ...iconBaseClass.value,\n      };\n    });\n    const navContainerClass = computed(() => {\n      return {\n        [`${componentName.value}__nav-container`]: true,\n        [`${componentName.value}__nav--card`]: props.theme === 'card',\n        [`${classPrefix.value}-is-${props.placement}`]: true,\n        [`${classPrefix.value}-is-addable`]: props.addable,\n      };\n    });\n    const navScrollContainerClass = computed(() => {\n      return {\n        [`${componentName.value}__nav-scroll`]: true,\n        [`${classPrefix.value}-is-scrollable`]: canToLeft.value || canToRight.value,\n      };\n    });\n\n    const navsWrapClass = computed(() => {\n      return [\n        `${componentName.value}__nav-wrap`,\n        `${classPrefix.value}-is-smooth`,\n        { [`${classPrefix.value}-is-vertical`]: isVerticalPlacement.value },\n      ];\n    });\n\n    const setOffset = (offset: number) => {\n      scrollLeft.value = calcValidOffset(offset, maxScrollLeft.value);\n    };\n\n    const handleScroll = (action: 'prev' | 'next') => {\n      setOffset(calcPrevOrNextOffset(getRefs(), scrollLeft.value, action));\n    };\n\n    const handleWheel = (event: WheelEvent) => {\n      if (!canToLeft.value && !canToRight.value) return;\n\n      event.preventDefault();\n      const { deltaX, deltaY } = event;\n\n      if (Math.abs(deltaX) > Math.abs(deltaY)) {\n        setOffset(scrollLeft.value + deltaX);\n      } else {\n        setOffset(scrollLeft.value + deltaY);\n      }\n    };\n\n    const handleActiveTabScroll = () => {\n      setTimeout(() => {\n        setOffset(calculateOffset(getRefs(), scrollLeft.value, props.scrollPosition));\n      }, 0);\n    };\n\n    const getMaxScrollLeft = () => {\n      nextTick(() => {\n        maxScrollLeft.value = calcMaxOffset(getRefs());\n      });\n    };\n\n    // watch\n    watch([() => props.placement, () => props.panels], getMaxScrollLeft);\n    watch([() => props.scrollPosition], handleActiveTabScroll);\n\n    // life times\n    useResize(debounce(getMaxScrollLeft), navsContainerRef.value);\n\n    const handleAddTab = (e: MouseEvent) => {\n      props.onAdd?.({ e });\n    };\n\n    const tabClick = (event: MouseEvent, nav: Partial<InstanceType<typeof TTabPanel>>) => {\n      const { value, disabled } = nav;\n      if (disabled || props.value === value) {\n        return false;\n      }\n      props.onChange(value);\n    };\n    const onTabRemove = ({ e, value, index }: Parameters<TdTabsProps['onRemove']>[0]) => {\n      props.onRemove({ e, value, index });\n    };\n    const setActiveTab = (ref: any) => {\n      if (!ref?.$el) return;\n      if (ref?.value === props.value && activeTabRef.value !== ref.$el) {\n        activeTabRef.value = ref.$el;\n        handleActiveTabScroll();\n      }\n    };\n\n    const { setNavsWrap } = useDragSort(props);\n\n    onMounted(() => {\n      setNavsWrap(navsWrapRef.value);\n      getMaxScrollLeft();\n      handleActiveTabScroll();\n    });\n    // renders\n    const renderNavsContent = () => {\n      return props.panels.map((panel, index) => {\n        let label;\n        if (panel?.children?.label) {\n          label = panel.children.label();\n        } else if (isFunction(panel.label)) {\n          label = panel.label(h);\n        } else {\n          label = panel.label || `选项卡${index + 1}`;\n        }\n        let draggable = props.dragSort;\n        if (draggable && panel.draggable === false) {\n          draggable = panel.draggable;\n        }\n        return (\n          <TTabNavItem\n            ref={setActiveTab}\n            draggable={draggable}\n            key={panel.value}\n            index={index}\n            theme={props.theme}\n            size={props.size}\n            placement={props.placement}\n            label={label}\n            active={panel.value === props.value}\n            disabled={props.disabled || panel.disabled}\n            removable={panel.removable}\n            value={panel.value}\n            onClick={(e: MouseEvent) => tabClick(e, panel)}\n            onTabRemove={onTabRemove}\n            onTabPanelRemove={panel.onRemove}\n          />\n        );\n      });\n    };\n    const renderArrows = () => {\n      return [\n        <div\n          ref={leftOperationsRef}\n          class={[`${componentName.value}__operations`, `${componentName.value}__operations--left`]}\n        >\n          <Transition name=\"fade\" mode=\"out-in\" appear>\n            {canToLeft.value ? (\n              <div class={leftIconClass.value} onClick={() => handleScroll('prev')}>\n                <ChevronLeftIcon />\n              </div>\n            ) : null}\n          </Transition>\n        </div>,\n        <div\n          ref={rightOperationsRef}\n          class={[`${componentName.value}__operations`, `${componentName.value}__operations--right`]}\n        >\n          <Transition name=\"fade\" mode=\"out-in\" appear>\n            {canToRight.value ? (\n              <div ref={toRightBtnRef} class={rightIconClass.value} onClick={() => handleScroll('next')}>\n                <ChevronRightIcon></ChevronRightIcon>\n              </div>\n            ) : null}\n          </Transition>\n          {props.addable ? (\n            <div class={addIconClass.value} onClick={handleAddTab}>\n              <AddIcon></AddIcon>\n            </div>\n          ) : null}\n          {showAction.value && props.action}\n        </div>,\n      ];\n    };\n    const renderNavs = () => {\n      const navContent = renderNavsContent();\n      return (\n        <div class={navContainerClass.value}>\n          <div class={navScrollContainerClass.value} onWheel={handleWheel}>\n            <div ref={navsWrapRef} class={navsWrapClass.value} style={wrapTransformStyle.value}>\n              {props.theme !== 'card' && (\n                <TTabNavBar placement={props.placement} value={props.value} navs={navContent} />\n              )}\n              {navContent}\n            </div>\n          </div>\n        </div>\n      );\n    };\n\n    return () => {\n      return (\n        <div ref={navsContainerRef} class={[`${componentName.value}__nav`]} style={navsContainerStyle.value}>\n          {renderArrows()}\n          {renderNavs()}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["traversalTabNavs","tabNavs","fn","Array","from","filter","node","HTMLDivElement","getAttribute","forEach","handleTarget","target","resultTarget","itemNode","Node","contains","useDragSort","props","navsWrap","dragged","enterTargets","dragstart","event","style","opacity","dt","dataTransfer","effectAllowed","setData","e","dragend","dragover","children","dropEffect","draggable","preventDefault","dragenter","firstChild","HTMLElement","newStyle","outline","Object","assign","includes","push","dragleave","_i","_enterTargets","length","enterTarget","drop","tabNav","parentNode","_props$onDragSort","dragIndex","indexOf","call","targetIndex","currentIndex","theme","endIndex","onDragSort","current","panels","value","setNavsWrap","val","addEventListener","document","onUnmounted","removeEventListener","getDomWidth","dom","offsetWidth","getDomOffsetLeft","offsetLeft","calculateOffset","depElement","offset","scrollPosition","navsContainer","activeTab","rightOperations","leftOperations","tabWidth","wrapWidth","tabOffset","rightOperationsWidth","leftOperationsWidth","calcPrevOrNextOffset","elements","action","navsContainerWidth","activeTabWidth","diffWidth","Math","abs","calcMaxOffset","toRightBtn","containerWidth","toRightBtnWidth","calcValidOffset","maxOffset","max","min","defineComponent","name","resizeObserver","tabProps","type","default","placement","size","disabled","addable","onChange","onAdd","onRemove","dragSort","setup","componentName","usePrefixClass","_useGlobalIcon","useGlobalIcon","ChevronLeftIcon","TdChevronLeftIcon","ChevronRightIcon","TdChevronRightIcon","AddIcon","TdAddIcon","classPrefix","_useCommonClassName","useCommonClassName","SIZE","scrollLeft","ref","navsContainerRef","navsWrapRef","leftOperationsRef","rightOperationsRef","toRightBtnRef","activeTabRef","maxScrollLeft","showAction","computed","_props$placement","toLowerCase","getRefs","isVerticalPlacement","canToLeft","canToRight","wrapTransformStyle","transform","concat","navsContainerStyle","iconBaseClass","_defineProperty","medium","large","leftIconClass","_objectSpread","rightIconClass","addIconClass","navContainerClass","navScrollContainerClass","navsWrapClass","setOffset","handleScroll","handleWheel","deltaX","deltaY","handleActiveTabScroll","setTimeout","getMaxScrollLeft","nextTick","watch","useResize","debounce","handleAddTab","_props$onAdd","tabClick","nav","onTabRemove","_ref5","index","setActiveTab","$el","_useDragSort","onMounted","renderNavsContent","map","panel","_panel$children","label","isFunction","h","_createVNode","TTabNavItem","removable","onClick","renderArrows","Transition","_default","renderNavs","navContent","TTabNavBar"],"mappings":"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"}